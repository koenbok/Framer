(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var AnimatorClasses,BezierCurveAnimator,Config,Defaults,EventEmitter,Frame,LinearAnimator,SpringDHOAnimator,SpringRK4Animator,Utils,_,_runningAnimations,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};_=require("./Underscore")._;Utils=require("./Utils");Config=require("./Config").Config;Defaults=require("./Defaults").Defaults;EventEmitter=require("./EventEmitter").EventEmitter;Frame=require("./Frame").Frame;LinearAnimator=require("./Animators/LinearAnimator").LinearAnimator;BezierCurveAnimator=require("./Animators/BezierCurveAnimator").BezierCurveAnimator;SpringRK4Animator=require("./Animators/SpringRK4Animator").SpringRK4Animator;SpringDHOAnimator=require("./Animators/SpringDHOAnimator").SpringDHOAnimator;AnimatorClasses={linear:LinearAnimator,"bezier-curve":BezierCurveAnimator,"spring-rk4":SpringRK4Animator,"spring-dho":SpringDHOAnimator};AnimatorClasses["spring"]=AnimatorClasses["spring-rk4"];AnimatorClasses["cubic-bezier"]=AnimatorClasses["bezier-curve"];_runningAnimations=[];exports.Animation=function(_super){__extends(Animation,_super);Animation.runningAnimations=function(){return _runningAnimations};function Animation(options){if(options==null){options={}}this.start=__bind(this.start,this);options=Defaults.getDefaults("Animation",options);Animation.__super__.constructor.call(this,options);this.options=Utils.setDefaultProperties(options,{layer:null,properties:{},curve:"linear",curveOptions:{},time:1,repeat:0,delay:0,debug:true});if(options.layer===null){console.error("Animation: missing layer")}if(options.origin){console.warn("Animation.origin: please use layer.originX and layer.originY")}if(options.properties instanceof Frame){option.properties=option.properties.properties}this.options.properties=this._filterAnimatableProperties(this.options.properties);this._parseAnimatorOptions();this._originalState=this._currentState();this._repeatCounter=this.options.repeat}Animation.prototype._filterAnimatableProperties=function(properties){var animatableProperties,k,v;animatableProperties={};for(k in properties){v=properties[k];if(_.isNumber(v)){animatableProperties[k]=v}}return animatableProperties};Animation.prototype._currentState=function(){return _.pick(this.options.layer,_.keys(this.options.properties))};Animation.prototype._animatorClass=function(){var animatorClassName,parsedCurve;parsedCurve=Utils.parseFunction(this.options.curve);animatorClassName=parsedCurve.name.toLowerCase();if(AnimatorClasses.hasOwnProperty(animatorClassName)){return AnimatorClasses[animatorClassName]}return LinearAnimator};Animation.prototype._parseAnimatorOptions=function(){var animatorClass,i,k,parsedCurve,value,_base,_i,_j,_len,_len1,_ref,_ref1,_results;animatorClass=this._animatorClass();parsedCurve=Utils.parseFunction(this.options.curve);if(animatorClass===LinearAnimator||animatorClass===BezierCurveAnimator){if(_.isString(this.options.curveOptions)||_.isArray(this.options.curveOptions)){this.options.curveOptions={values:this.options.curveOptions}}if((_base=this.options.curveOptions).time==null){_base.time=this.options.time}}if(parsedCurve.args.length){if(animatorClass===BezierCurveAnimator){this.options.curveOptions.values=parsedCurve.args.map(function(v){return parseFloat(v)||0})}if(animatorClass===SpringRK4Animator){_ref=["tension","friction","velocity"];for(i=_i=0,_len=_ref.length;_i<_len;i=++_i){k=_ref[i];value=parseFloat(parsedCurve.args[i]);if(value){this.options.curveOptions[k]=value}}}if(animatorClass===SpringDHOAnimator){_ref1=["stiffness","damping","mass","tolerance"];_results=[];for(i=_j=0,_len1=_ref1.length;_j<_len1;i=++_j){k=_ref1[i];value=parseFloat(parsedCurve.args[i]);if(value){_results.push(this.options.curveOptions[k]=value)}else{_results.push(void 0)}}return _results}}};Animation.prototype.start=function(){var AnimatorClass,k,start,stateA,stateB,target,v,_ref,_this=this;AnimatorClass=this._animatorClass();console.debug("Animation.start "+AnimatorClass.name,this.options.curveOptions);this._animator=new AnimatorClass(this.options.curveOptions);target=this.options.layer;stateA=this._currentState();stateB={};_ref=this.options.properties;for(k in _ref){v=_ref[k];if(stateA[k]!==v){stateB[k]=v}}if(_.isEqual(stateA,stateB)){console.warn("Nothing to animate")}console.debug("Animation.start");for(k in stateB){v=stateB[k];console.debug("	"+k+": "+stateA[k]+" -> "+stateB[k])}this._animator.on("start",function(){return _this.emit("start")});this._animator.on("stop",function(){return _this.emit("stop")});this._animator.on("end",function(){return _this.emit("end")});if(this._repeatCounter>0){this._animator.on("end",function(){for(k in stateA){v=stateA[k];target[k]=v}_this._repeatCounter--;return _this.start()})}this._animator.on("tick",function(value){for(k in stateB){v=stateB[k];target[k]=Utils.mapRange(value,0,1,stateA[k],stateB[k])}});start=function(){_runningAnimations.push(_this);return _this._animator.start()};if(this.options.delay){return Utils.delay(this.options.delay,start)}else{return start()}};Animation.prototype.stop=function(){this._animator.stop();return _runningAnimations=_.without(_runningAnimations,this)};Animation.prototype.reverse=function(){var animation,options;options=_.clone(this.options);options.properties=this._originalState;animation=new Animation(options);return animation};Animation.prototype.revert=function(){return this.reverse()};Animation.prototype.inverse=function(){return this.reverse()};Animation.prototype.invert=function(){return this.reverse()};Animation.prototype.emit=function(event){Animation.__super__.emit.apply(this,arguments);return this.options.layer.emit(event,this)};return Animation}(EventEmitter)},{"./Animators/BezierCurveAnimator":4,"./Animators/LinearAnimator":5,"./Animators/SpringDHOAnimator":6,"./Animators/SpringRK4Animator":7,"./Config":10,"./Defaults":12,"./EventEmitter":13,"./Frame":15,"./Underscore":22,"./Utils":23}],2:[function(require,module,exports){var AnimationLoop,AnimationLoopIndexKey,Config,EventEmitter,Utils,_;_=require("./Underscore")._;Utils=require("./Utils");Config=require("./Config").Config;EventEmitter=require("./EventEmitter").EventEmitter;AnimationLoopIndexKey="_animationLoopIndex";AnimationLoop={debug:false,_animators:[],_running:false,_frameCounter:0,_sessionTime:0,_start:function(){if(AnimationLoop._running){return}if(!AnimationLoop._animators.length){return}AnimationLoop._running=true;AnimationLoop._time=Utils.getTime();AnimationLoop._sessionTime=0;return window.requestAnimationFrame(AnimationLoop._tick)},_stop:function(){console.debug("AnimationLoop._stop");return AnimationLoop._running=false},_tick:function(){var animator,delta,removeAnimators,time,_i,_j,_len,_len1,_ref;if(!AnimationLoop._animators.length){return AnimationLoop._stop()}if(AnimationLoop._sessionTime===0){console.debug("AnimationLoop._start")}AnimationLoop._frameCounter++;time=Utils.getTime();delta=time-AnimationLoop._time;AnimationLoop._sessionTime+=delta;removeAnimators=[];_ref=AnimationLoop._animators;for(_i=0,_len=_ref.length;_i<_len;_i++){animator=_ref[_i];animator.emit("tick",animator.next(delta));if(animator.finished()){animator.emit("tick",1);removeAnimators.push(animator)}}AnimationLoop._time=time;for(_j=0,_len1=removeAnimators.length;_j<_len1;_j++){animator=removeAnimators[_j];AnimationLoop.remove(animator);animator.emit("end")}window.requestAnimationFrame(AnimationLoop._tick)},add:function(animator){if(animator.hasOwnProperty(AnimationLoopIndexKey)){return}animator[AnimationLoopIndexKey]=AnimationLoop._animators.push(animator);animator.emit("start");return AnimationLoop._start()},remove:function(animator){AnimationLoop._animators=_.without(AnimationLoop._animators,animator);return animator.emit("stop")}};exports.AnimationLoop=AnimationLoop},{"./Config":10,"./EventEmitter":13,"./Underscore":22,"./Utils":23}],3:[function(require,module,exports){var AnimationLoop,Config,EventEmitter,Utils,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Utils=require("./Utils");Config=require("./Config").Config;EventEmitter=require("./EventEmitter").EventEmitter;AnimationLoop=require("./AnimationLoop").AnimationLoop;exports.Animator=function(_super){__extends(Animator,_super);"The animator class is a very simple class that\n	- Takes a set of input values at setup({input values})\n	- Emits an output value for progress (0 -> 1) in value(progress)";function Animator(options){if(options==null){options={}}this.setup(options)}Animator.prototype.setup=function(options){throw Error("Not implemented")};Animator.prototype.next=function(delta){throw Error("Not implemented")};Animator.prototype.finished=function(){throw Error("Not implemented")};Animator.prototype.start=function(){return AnimationLoop.add(this)};Animator.prototype.stop=function(){return AnimationLoop.remove(this)};return Animator}(EventEmitter)},{"./AnimationLoop":2,"./Config":10,"./EventEmitter":13,"./Utils":23}],4:[function(require,module,exports){var Animator,BezierCurveDefaults,UnitBezier,Utils,_,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};_=require("../Underscore")._;Utils=require("../Utils");Animator=require("../Animator").Animator;BezierCurveDefaults={linear:[0,0,1,1],ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};exports.BezierCurveAnimator=function(_super){__extends(BezierCurveAnimator,_super);function BezierCurveAnimator(){_ref=BezierCurveAnimator.__super__.constructor.apply(this,arguments);return _ref}BezierCurveAnimator.prototype.setup=function(options){if(_.isString(options)&&BezierCurveDefaults.hasOwnProperty(options.toLowerCase())){options={values:BezierCurveDefaults[options.toLowerCase()]}}if(options.values&&_.isString(options.values)&&BezierCurveDefaults.hasOwnProperty(options.values.toLowerCase())){options={values:BezierCurveDefaults[options.values.toLowerCase()],time:options.time}}if(_.isArray(options)&&options.length===4){options={values:options}}this.options=Utils.setDefaultProperties(options,{values:BezierCurveDefaults["ease-in-out"],time:1});return this._unitBezier=new UnitBezier(this.options.values[0],this.options.values[1],this.options.values[2],this.options.values[3],this._time=0)};BezierCurveAnimator.prototype.next=function(delta){this._time+=delta;if(this.finished()){return 1}return this._unitBezier.solve(this._time/this.options.time)};BezierCurveAnimator.prototype.finished=function(){return this._time>=this.options.time};return BezierCurveAnimator}(Animator);UnitBezier=function(){UnitBezier.prototype.epsilon=1e-6;function UnitBezier(p1x,p1y,p2x,p2y){this.cx=3*p1x;this.bx=3*(p2x-p1x)-this.cx;this.ax=1-this.cx-this.bx;this.cy=3*p1y;this.by=3*(p2y-p1y)-this.cy;this.ay=1-this.cy-this.by}UnitBezier.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t};UnitBezier.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t};UnitBezier.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx};UnitBezier.prototype.solveCurveX=function(x){var d2,i,t0,t1,t2,x2;t2=x;i=0;while(i<8){x2=this.sampleCurveX(t2)-x;if(Math.abs(x2)<this.epsilon){return t2}d2=this.sampleCurveDerivativeX(t2);if(Math.abs(d2)<this.epsilon){break}t2=t2-x2/d2;i++}t0=0;t1=1;t2=x;if(t2<t0){return t0}if(t2>t1){return t1}while(t0<t1){x2=this.sampleCurveX(t2);if(Math.abs(x2-x)<this.epsilon){return t2}if(x>x2){t0=t2}else{t1=t2}t2=(t1-t0)*.5+t0}return t2};UnitBezier.prototype.solve=function(x){return this.sampleCurveY(this.solveCurveX(x))};return UnitBezier}()},{"../Animator":3,"../Underscore":22,"../Utils":23}],5:[function(require,module,exports){var Animator,Utils,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Utils=require("../Utils");Animator=require("../Animator").Animator;exports.LinearAnimator=function(_super){__extends(LinearAnimator,_super);function LinearAnimator(){_ref=LinearAnimator.__super__.constructor.apply(this,arguments);return _ref}LinearAnimator.prototype.setup=function(options){this.options=Utils.setDefaultProperties(options,{time:1});return this._time=0};LinearAnimator.prototype.next=function(delta){if(this.finished()){return 1}this._time+=delta;return this._time/this.options.time};LinearAnimator.prototype.finished=function(){return this._time>=this.options.time};return LinearAnimator}(Animator)},{"../Animator":3,"../Utils":23}],6:[function(require,module,exports){var Animator,Utils,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Utils=require("../Utils");Animator=require("../Animator").Animator;exports.SpringDHOAnimator=function(_super){__extends(SpringDHOAnimator,_super);function SpringDHOAnimator(){this.finished=__bind(this.finished,this);_ref=SpringDHOAnimator.__super__.constructor.apply(this,arguments);return _ref}SpringDHOAnimator.prototype.setup=function(options){this.options=Utils.setDefaultProperties(options,{velocity:0,tolerance:1/1e4,stiffness:50,damping:2,mass:.2,time:null});console.log("SpringDHOAnimator.options",this.options,options);this._time=0;this._value=0;return this._velocity=this.options.velocity};SpringDHOAnimator.prototype.next=function(delta){var F_damper,F_spring,b,k;if(this.finished()){return 1}this._time+=delta;k=0-this.options.stiffness;b=0-this.options.damping;F_spring=k*(this._value-1);F_damper=b*this._velocity;this._velocity+=(F_spring+F_damper)/this.options.mass*delta;this._value+=this._velocity*delta;return this._value};SpringDHOAnimator.prototype.finished=function(){return this._time>0&&Math.abs(this._velocity)<this.options.tolerance};return SpringDHOAnimator}(Animator)},{"../Animator":3,"../Utils":23}],7:[function(require,module,exports){var Animator,Utils,springAccelerationForState,springEvaluateState,springEvaluateStateWithDerivative,springIntegrateState,_ref,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Utils=require("../Utils");Animator=require("../Animator").Animator;exports.SpringRK4Animator=function(_super){__extends(SpringRK4Animator,_super);function SpringRK4Animator(){this.finished=__bind(this.finished,this);_ref=SpringRK4Animator.__super__.constructor.apply(this,arguments);return _ref}SpringRK4Animator.prototype.setup=function(options){this.options=Utils.setDefaultProperties(options,{tension:500,friction:10,velocity:0,tolerance:1/1e4,time:null});this._time=0;this._value=0;this._velocity=this.options.velocity;return this._stopSpring=false};SpringRK4Animator.prototype.next=function(delta){var finalVelocity,net1DVelocity,netFloat,netValueIsLow,netVelocityIsLow,stateAfter,stateBefore;if(this.finished()){return 1}this._time+=delta;stateBefore={};stateAfter={};stateBefore.x=this._value-1;stateBefore.v=this._velocity;stateBefore.tension=this.options.tension;stateBefore.friction=this.options.friction;stateAfter=springIntegrateState(stateBefore,delta);this._value=1+stateAfter.x;finalVelocity=stateAfter.v;netFloat=stateAfter.x;net1DVelocity=stateAfter.v;netValueIsLow=Math.abs(netFloat)<this.options.tolerance;netVelocityIsLow=Math.abs(net1DVelocity)<this.options.tolerance;this._stopSpring=netValueIsLow&&netVelocityIsLow;this._velocity=finalVelocity;return this._value};SpringRK4Animator.prototype.finished=function(){return this._stopSpring};return SpringRK4Animator}(Animator);springAccelerationForState=function(state){return-state.tension*state.x-state.friction*state.v};springEvaluateState=function(initialState){var output;output={};output.dx=initialState.v;output.dv=springAccelerationForState(initialState);return output};springEvaluateStateWithDerivative=function(initialState,dt,derivative){var output,state;state={};state.x=initialState.x+derivative.dx*dt;state.v=initialState.v+derivative.dv*dt;state.tension=initialState.tension;state.friction=initialState.friction;output={};output.dx=state.v;output.dv=springAccelerationForState(state);return output};springIntegrateState=function(state,speed){var a,b,c,d,dvdt,dxdt;a=springEvaluateState(state);b=springEvaluateStateWithDerivative(state,speed*.5,a);c=springEvaluateStateWithDerivative(state,speed*.5,b);d=springEvaluateStateWithDerivative(state,speed,c);dxdt=1/6*(a.dx+2*(b.dx+c.dx)+d.dx);dvdt=1/6*(a.dv+2*(b.dv+c.dv)+d.dv);state.x=state.x+dxdt*speed;state.v=state.v+dvdt*speed;return state}},{"../Animator":3,"../Utils":23}],8:[function(require,module,exports){var CounterKey,DefinedPropertiesKey,DefinedPropertiesValuesKey,EventEmitter,Utils,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};_=require("./Underscore")._;Utils=require("./Utils");EventEmitter=require("./EventEmitter").EventEmitter;CounterKey="_ObjectCounter";DefinedPropertiesKey="_DefinedPropertiesKey";DefinedPropertiesValuesKey="_DefinedPropertiesValuesKey";exports.BaseClass=function(_super){__extends(BaseClass,_super);BaseClass.define=function(propertyName,descriptor){if(this!==BaseClass&&descriptor.exportable===true){descriptor.propertyName=propertyName;if(this[DefinedPropertiesKey]==null){this[DefinedPropertiesKey]={}}this[DefinedPropertiesKey][propertyName]=descriptor}Object.defineProperty(this.prototype,propertyName,descriptor);return Object.__};BaseClass.simpleProperty=function(name,fallback,exportable){if(exportable==null){exportable=true}return{exportable:exportable,"default":fallback,get:function(){return this._getPropertyValue(name)},set:function(value){return this._setPropertyValue(name,value)}}};BaseClass.prototype._setPropertyValue=function(k,v){return this[DefinedPropertiesValuesKey][k]=v};BaseClass.prototype._getPropertyValue=function(k){return Utils.valueOrDefault(this[DefinedPropertiesValuesKey][k],this._getPropertyDefaultValue(k))};BaseClass.prototype._getPropertyDefaultValue=function(k){return this.constructor[DefinedPropertiesKey][k]["default"]};BaseClass.prototype._propertyList=function(){return this.constructor[DefinedPropertiesKey]};BaseClass.prototype.keys=function(){return _.keys(this.properties)};BaseClass.define("properties",{get:function(){var k,properties,v,_ref;properties={};_ref=this.constructor[DefinedPropertiesKey];for(k in _ref){v=_ref[k];if(v.exportable!==false){properties[k]=this[k]}}return properties},set:function(value){var k,v,_results;_results=[];for(k in value){v=value[k];if(this.constructor[DefinedPropertiesKey].hasOwnProperty(k)){if(this.constructor[DefinedPropertiesKey].exportable!==false){_results.push(this[k]=v)}else{_results.push(void 0)}}else{_results.push(void 0)}}return _results}});BaseClass.define("id",{get:function(){return this._id}});BaseClass.prototype.toString=function(){var properties;properties=_.map(this.properties,function(v,k){return""+k+":"+v},4);return"["+this.constructor.name+" id:"+this.id+" "+properties.join(" ")+"]"};function BaseClass(options){var _base,_this=this;if(options==null){options={}}this.toString=__bind(this.toString,this);this._getPropertyValue=__bind(this._getPropertyValue,this);this._setPropertyValue=__bind(this._setPropertyValue,this);BaseClass.__super__.constructor.apply(this,arguments);this[DefinedPropertiesValuesKey]={};if((_base=this.constructor)[CounterKey]==null){_base[CounterKey]=0}this.constructor[CounterKey]+=1;this._id=this.constructor[CounterKey];_.map(this.constructor[DefinedPropertiesKey],function(descriptor,name){return _this[name]=Utils.valueOrDefault(options[name],_this._getPropertyDefaultValue(name))})}return BaseClass}(EventEmitter)},{"./EventEmitter":13,"./Underscore":22,"./Utils":23}],9:[function(require,module,exports){var CompatImageView,CompatLayer,CompatScrollView,CompatView,Layer,compatProperty,compatWarning,_ref,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};Layer=require("./Layer").Layer;compatWarning=function(msg){return console.warn(msg)};compatProperty=function(name,originalName){return{exportable:false,get:function(){compatWarning(""+originalName+" is a deprecated property");return this[name]},set:function(value){compatWarning(""+originalName+" is a deprecated property");return this[name]=value}}};CompatLayer=function(_super){var addSubView,removeSubView;__extends(CompatLayer,_super);function CompatLayer(options){if(options==null){options={}}if(options.hasOwnProperty("superView")){options.superLayer=options.superView}CompatLayer.__super__.constructor.call(this,options)}CompatLayer.define("superView",compatProperty("superLayer","superView"));CompatLayer.define("subViews",compatProperty("subLayers","subViews"));CompatLayer.define("siblingViews",compatProperty("siblingLayers","siblingViews"));addSubView=function(layer){return this.addSubLayer(layer)};removeSubView=function(layer){return this.removeSubLayer(layer)};return CompatLayer}(Layer);CompatView=function(_super){__extends(CompatView,_super);function CompatView(options){if(options==null){options={}}compatWarning("Views are now called Layers");CompatView.__super__.constructor.call(this,options)}return CompatView}(CompatLayer);CompatImageView=function(_super){__extends(CompatImageView,_super);function CompatImageView(){_ref=CompatImageView.__super__.constructor.apply(this,arguments);return _ref}return CompatImageView}(CompatView);CompatScrollView=function(_super){__extends(CompatScrollView,_super);function CompatScrollView(){CompatScrollView.__super__.constructor.apply(this,arguments);this.scroll=true}return CompatScrollView}(CompatView);window.Layer=CompatLayer;window.Framer.Layer=CompatLayer;window.View=CompatView;window.ImageView=CompatImageView;window.ScrollView=CompatScrollView;window.utils=window.Utils},{"./Layer":18}],10:[function(require,module,exports){var Utils;Utils=require("./Utils");exports.Config={targetFPS:60,rootBaseCSS:{"-webkit-perspective":1e3},layerBaseCSS:{display:"block",position:"absolute","-webkit-box-sizing":"border-box","background-repeat":"no-repeat","background-size":"cover","-webkit-overflow-scrolling":"touch"}}},{"./Utils":23}],11:[function(require,module,exports){var EventKeys,Utils,createDebugLayer,errorWarning,hideDebug,showDebug,toggleDebug,_debugLayers,_errorWarningLayer;Utils=require("./Utils");_debugLayers=null;createDebugLayer=function(layer){var overLayer;overLayer=new Layer({frame:layer.screenFrame(),backgroundColor:"rgba(50,150,200,.35)"});overLayer.style={textAlign:"center",color:"white",font:"10px/1em Monaco",lineHeight:""+(overLayer.height+1)+"px",boxShadow:"inset 0 0 0 1px rgba(255,255,255,.5)"};overLayer.html=layer.name||layer.id;overLayer.on(Events.Click,function(event,layer){layer.scale=.8;return layer.animate({properties:{scale:1},curve:"spring(1000,10,0)"})});return overLayer};showDebug=function(){return _debugLayers=Layer.Layers().map(createDebugLayer)};hideDebug=function(){return _debugLayers.map(function(layer){return layer.destroy()})};toggleDebug=Utils.toggle(showDebug,hideDebug);EventKeys={Shift:16,Escape:27};window.document.onkeyup=function(event){if(event.keyCode===EventKeys.Escape){return toggleDebug()()}};_errorWarningLayer=null;errorWarning=function(){var layer;if(_errorWarningLayer){return}layer=new Layer({x:20,y:-50,width:300,height:40});layer.states.add({visible:{x:20,y:20,width:300,height:40}});layer.html="Javascript Error, see the console";layer.style={font:"12px/1.35em Menlo",color:"white",textAlign:"center",lineHeight:""+layer.height+"px",borderRadius:"5px",backgroundColor:"rgba(255,0,0,.8)"};layer.states.animationOptions={curve:"spring",curveOptions:{tension:1e3,friction:30}};layer.states["switch"]("visible");layer.on(Events.Click,function(){return this.states["switch"]("default")});return _errorWarningLayer=layer};window.onerror=errorWarning},{"./Utils":23}],12:[function(require,module,exports){var Originals,Utils,_;_=require("./Underscore")._;Utils=require("./Utils");Originals={Layer:{backgroundColor:"rgba(0,124,255,.5)",width:100,height:100},Animation:{curve:"linear",time:1}};exports.Defaults={getDefaults:function(className,options){var defaults,k,v,_ref;defaults=_.clone(Originals[className]);_ref=Framer.Defaults[className];for(k in _ref){v=_ref[k];defaults[k]=_.isFunction(v)?v():v}for(k in defaults){v=defaults[k];if(!options.hasOwnProperty(k)){options[k]=v}}return options},reset:function(){return window.Framer.Defaults=_.clone(Originals)}}},{"./Underscore":22,"./Utils":23}],13:[function(require,module,exports){var EventEmitterEventsKey,_,__slice=[].slice;_=require("./Underscore")._;EventEmitterEventsKey="_events";exports.EventEmitter=function(){function EventEmitter(){this[EventEmitterEventsKey]={}}EventEmitter.prototype._eventCheck=function(event,method){if(!event){return console.warn(""+this.constructor.name+"."+method+" missing event (like 'click')")}};EventEmitter.prototype.emit=function(){var args,event,listener,_i,_len,_ref,_ref1;event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[];if(!((_ref=this[EventEmitterEventsKey])!=null?_ref[event]:void 0)){return}_ref1=this[EventEmitterEventsKey][event];for(_i=0,_len=_ref1.length;_i<_len;_i++){listener=_ref1[_i];listener.apply(null,args)}};EventEmitter.prototype.addListener=function(event,listener){var _base;this._eventCheck(event,"addListener");if(this[EventEmitterEventsKey]==null){this[EventEmitterEventsKey]={}}if((_base=this[EventEmitterEventsKey])[event]==null){_base[event]=[]}return this[EventEmitterEventsKey][event].push(listener)};EventEmitter.prototype.removeListener=function(event,listener){this._eventCheck(event,"removeListener");if(!this[EventEmitterEventsKey]){return}if(!this[EventEmitterEventsKey][event]){return}this[EventEmitterEventsKey][event]=_.without(this[EventEmitterEventsKey][event],listener)};EventEmitter.prototype.once=function(event,listener){var fn,_this=this;fn=function(){_this.removeListener(event,fn);return listener.apply(null,arguments)};return this.on(event,fn)};EventEmitter.prototype.removeAllListeners=function(event){var listener,_i,_len,_ref;if(!this[EventEmitterEventsKey]){return}if(!this[EventEmitterEventsKey][event]){return}_ref=this[EventEmitterEventsKey][event];for(_i=0,_len=_ref.length;_i<_len;_i++){listener=_ref[_i];this.removeListener(event,listener)}};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.off=EventEmitter.prototype.removeListener;return EventEmitter}()},{"./Underscore":22}],14:[function(require,module,exports){var Events,Utils,_;_=require("./Underscore")._;Utils=require("./Utils");Events={};if(Utils.isTouch()){Events.TouchStart="touchstart";Events.TouchEnd="touchend";Events.TouchMove="touchmove"}else{Events.TouchStart="mousedown";Events.TouchEnd="mouseup";Events.TouchMove="mousemove"}Events.Click=Events.TouchEnd;Events.MouseOver="mouseover";Events.MouseOut="mouseout";Events.AnimationStart="start";Events.AnimationStop="stop";Events.AnimationEnd="end";Events.Scroll="scroll";Events.touchEvent=function(event){var touchEvent,_ref,_ref1;touchEvent=(_ref=event.touches)!=null?_ref[0]:void 0;if(touchEvent==null){touchEvent=(_ref1=event.changedTouches)!=null?_ref1[0]:void 0}if(touchEvent==null){touchEvent=event}return touchEvent};exports.Events=Events},{"./Underscore":22,"./Utils":23}],15:[function(require,module,exports){var BaseClass,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};BaseClass=require("./BaseClass").BaseClass;exports.Frame=function(_super){__extends(Frame,_super);Frame.define("x",Frame.simpleProperty("x",0));Frame.define("y",Frame.simpleProperty("y",0));Frame.define("width",Frame.simpleProperty("width",0));Frame.define("height",Frame.simpleProperty("height",0));Frame.define("minX",Frame.simpleProperty("x",0,false));Frame.define("minY",Frame.simpleProperty("y",0,false));function Frame(options){var k,_i,_len,_ref;if(options==null){options={}}Frame.__super__.constructor.call(this,options);_ref=["minX","midX","maxX","minY","midY","maxY"];for(_i=0,_len=_ref.length;_i<_len;_i++){k=_ref[_i];if(options.hasOwnProperty(k)){this[k]=options[k]}}}Frame.define("midX",{get:function(){return Utils.frameGetMidX(this)},set:function(value){return Utils.frameSetMidX(this,value)}});Frame.define("maxX",{get:function(){return Utils.frameGetMaxX(this)},set:function(value){return Utils.frameSetMaxX(this,value)}});Frame.define("midY",{get:function(){return Utils.frameGetMidY(this)},set:function(value){return Utils.frameSetMidY(this,value)}});Frame.define("maxY",{get:function(){return Utils.frameGetMaxY(this)},set:function(value){return Utils.frameSetMaxY(this,value)}});return Frame}(BaseClass)},{"./BaseClass":8}],16:[function(require,module,exports){var Defaults,Framer,_;_=require("./Underscore")._;Framer={};Framer._=_;Framer.Utils=require("./Utils");Framer.Frame=require("./Frame").Frame;Framer.Layer=require("./Layer").Layer;Framer.Events=require("./Events").Events;Framer.Animation=require("./Animation").Animation;if(window){_.extend(window,Framer)}Framer.Config=require("./Config").Config;Framer.EventEmitter=require("./EventEmitter").EventEmitter;Framer.BaseClass=require("./BaseClass").BaseClass;Framer.LayerStyle=require("./LayerStyle").LayerStyle;Framer.AnimationLoop=require("./AnimationLoop").AnimationLoop;Framer.LinearAnimator=require("./Animators/LinearAnimator").LinearAnimator;Framer.BezierCurveAnimator=require("./Animators/BezierCurveAnimator").BezierCurveAnimator;Framer.SpringDHOAnimator=require("./Animators/SpringDHOAnimator").SpringDHOAnimator;Framer.SpringRK4Animator=require("./Animators/SpringRK4Animator").SpringRK4Animator;Framer.Importer=require("./Importer").Importer;Framer.Debug=require("./Debug").Debug;if(window){window.Framer=Framer}require("./Compat");Defaults=require("./Defaults").Defaults;
Framer.resetDefaults=Defaults.reset;Framer.resetDefaults()},{"./Animation":1,"./AnimationLoop":2,"./Animators/BezierCurveAnimator":4,"./Animators/LinearAnimator":5,"./Animators/SpringDHOAnimator":6,"./Animators/SpringRK4Animator":7,"./BaseClass":8,"./Compat":9,"./Config":10,"./Debug":11,"./Defaults":12,"./EventEmitter":13,"./Events":14,"./Frame":15,"./Importer":17,"./Layer":18,"./LayerStyle":21,"./Underscore":22,"./Utils":23}],17:[function(require,module,exports){var ChromeAlert,Utils,_;_=require("./Underscore")._;Utils=require("./Utils");ChromeAlert="Importing layers is currently only supported on Safari. If you really want it to work with Chrome quit it, open a terminal and run:\nopen -a Google Chrome -–allow-file-access-from-files";exports.Importer=function(){function Importer(path,extraLayerProperties){this.path=path;this.extraLayerProperties=extraLayerProperties!=null?extraLayerProperties:{};this.paths={layerInfo:Utils.pathJoin(this.path,"layers.json"),images:Utils.pathJoin(this.path,"images"),documentName:this.path.split("/").pop()};this._createdLayers=[];this._createdLayersByName={}}Importer.prototype.load=function(){var layer,layerInfo,layersByName,_i,_j,_len,_len1,_ref,_ref1,_this=this;layersByName={};layerInfo=this._loadlayerInfo();layerInfo.map(function(layerItemInfo){return _this._createLayer(layerItemInfo)});_ref=this._createdLayers;for(_i=0,_len=_ref.length;_i<_len;_i++){layer=_ref[_i];this._correctLayer(layer)}_ref1=this._createdLayers;for(_j=0,_len1=_ref1.length;_j<_len1;_j++){layer=_ref1[_j];if(!layer.superLayer){layer.superLayer=null}}return this._createdLayersByName};Importer.prototype._loadlayerInfo=function(){var importedKey,_ref;importedKey=""+this.paths.documentName+"/layers.json.js";if((_ref=window.__imported__)!=null?_ref.hasOwnProperty(importedKey):void 0){return window.__imported__[importedKey]}return Framer.Utils.domLoadJSONSync(this.paths.layerInfo)};Importer.prototype._createLayer=function(info,superLayer){var LayerClass,layer,layerInfo,_ref,_this=this;LayerClass=Layer;layerInfo={shadow:true,name:info.name,frame:info.layerFrame,clip:false,backgroundColor:null,visible:(_ref=info.visible)!=null?_ref:true};_.extend(layerInfo,this.extraLayerProperties);if(info.image){layerInfo.frame=info.image.frame;layerInfo.image=Utils.pathJoin(this.path,info.image.path)}if(info.maskFrame){layerInfo.frame=info.maskFrame;layerInfo.clip=true}if(superLayer!=null?superLayer.contentLayer:void 0){layerInfo.superLayer=superLayer.contentLayer}else if(superLayer){layerInfo.superLayer=superLayer}layer=new LayerClass(layerInfo);layer.name=layerInfo.name;if(!layer.image&&!info.children.length&&!info.maskFrame){layer.frame=new Frame}info.children.reverse().map(function(info){return _this._createLayer(info,layer)});if(!layer.image&&!info.maskFrame){layer.frame=layer.contentFrame()}layer._info=info;this._createdLayers.push(layer);return this._createdLayersByName[layer.name]=layer};Importer.prototype._correctLayer=function(layer){var traverse;traverse=function(layer){var subLayer,_i,_len,_ref,_results;if(layer.superLayer){layer.frame=Utils.convertPoint(layer.frame,null,layer.superLayer)}_ref=layer.subLayers;_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){subLayer=_ref[_i];_results.push(traverse(subLayer))}return _results};if(!layer.superLayer){return traverse(layer)}};return Importer}();exports.Importer.load=function(path){var importer;importer=new exports.Importer(path);return importer.load()}},{"./Underscore":22,"./Utils":23}],18:[function(require,module,exports){var Animation,BaseClass,Config,Defaults,EventEmitter,Frame,LayerDraggable,LayerStates,LayerStyle,Utils,frameProperty,layerProperty,layerStyleProperty,_,_LayerList,_RootElement,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1},__slice=[].slice;_=require("./Underscore")._;Utils=require("./Utils");Config=require("./Config").Config;Defaults=require("./Defaults").Defaults;BaseClass=require("./BaseClass").BaseClass;EventEmitter=require("./EventEmitter").EventEmitter;Animation=require("./Animation").Animation;Frame=require("./Frame").Frame;LayerStyle=require("./LayerStyle").LayerStyle;LayerStates=require("./LayerStates").LayerStates;LayerDraggable=require("./LayerDraggable").LayerDraggable;_RootElement=null;_LayerList=[];layerProperty=function(name,cssProperty,fallback,validator,set){return{exportable:true,"default":fallback,get:function(){return this._getPropertyValue(name)},set:function(value){if(validator(value)===false){throw Error("value '"+value+"' of type "+typeof value+" is not valid for a Layer."+name+" property")}this._setPropertyValue(name,value);this.style[cssProperty]=LayerStyle[cssProperty](this);this.emit("change:"+name,value);if(set){return set(this,value)}}}};layerStyleProperty=function(cssProperty){return{exportable:true,get:function(){return this.style[cssProperty]},set:function(value){this.style[cssProperty]=value;return this.emit("change:"+cssProperty,value)}}};frameProperty=function(name){return{exportable:false,get:function(){return this.frame[name]},set:function(value){var frame;frame=this.frame;frame[name]=value;return this.frame=frame}}};exports.Layer=function(_super){__extends(Layer,_super);function Layer(options){var frame;if(options==null){options={}}this.addListener=__bind(this.addListener,this);this.__insertElement=__bind(this.__insertElement,this);_LayerList.push(this);this._createElement();this._setDefaultCSS();options=Defaults.getDefaults("Layer",options);Layer.__super__.constructor.call(this,options);this._element.id="FramerLayer-"+this.id;if(options.hasOwnProperty("frame")){frame=new Frame(options.frame)}else{frame=new Frame(options)}this.frame=frame;if(!options.superLayer){this.bringToFront();if(!options.shadow){this._insertElement()}}else{this.superLayer=options.superLayer}this._subLayers=[]}Layer.define("width",layerProperty("width","width",100,_.isNumber));Layer.define("height",layerProperty("height","height",100,_.isNumber));Layer.define("visible",layerProperty("visible","display",true,_.isBool));Layer.define("opacity",layerProperty("opacity","opacity",1,_.isNumber));Layer.define("index",layerProperty("index","zIndex",0,_.isNumber));Layer.define("clip",layerProperty("clip","overflow",true,_.isBool));Layer.define("scrollHorizontal",layerProperty("scrollHorizontal","overflowX",false,_.isBool,function(layer,value){if(value===true){return layer.ignoreEvents=false}}));Layer.define("scrollVertical",layerProperty("scrollVertical","overflowY",false,_.isBool,function(layer,value){if(value===true){return layer.ignoreEvents=false}}));Layer.define("scroll",{get:function(){return this.scrollHorizontal===true||this.scrollVertical===true},set:function(value){return this.scrollHorizontal=this.scrollVertical=true}});Layer.define("ignoreEvents",layerProperty("ignoreEvents","pointerEvents",true,_.isBool));Layer.define("x",layerProperty("x","webkitTransform",0,_.isNumber));Layer.define("y",layerProperty("y","webkitTransform",0,_.isNumber));Layer.define("z",layerProperty("z","webkitTransform",0,_.isNumber));Layer.define("scaleX",layerProperty("scaleX","webkitTransform",1,_.isNumber));Layer.define("scaleY",layerProperty("scaleY","webkitTransform",1,_.isNumber));Layer.define("scaleZ",layerProperty("scaleZ","webkitTransform",1,_.isNumber));Layer.define("scale",layerProperty("scale","webkitTransform",1,_.isNumber));Layer.define("originX",layerProperty("originX","webkitTransformOrigin",.5,_.isNumber));Layer.define("originY",layerProperty("originY","webkitTransformOrigin",.5,_.isNumber));Layer.define("rotationX",layerProperty("rotationX","webkitTransform",0,_.isNumber));Layer.define("rotationY",layerProperty("rotationY","webkitTransform",0,_.isNumber));Layer.define("rotationZ",layerProperty("rotationZ","webkitTransform",0,_.isNumber));Layer.define("rotation",layerProperty("rotationZ","webkitTransform",0,_.isNumber));Layer.define("blur",layerProperty("blur","webkitFilter",0,_.isNumber));Layer.define("brightness",layerProperty("brightness","webkitFilter",100,_.isNumber));Layer.define("saturate",layerProperty("saturate","webkitFilter",100,_.isNumber));Layer.define("hueRotate",layerProperty("hueRotate","webkitFilter",0,_.isNumber));Layer.define("contrast",layerProperty("contrast","webkitFilter",100,_.isNumber));Layer.define("invert",layerProperty("invert","webkitFilter",0,_.isNumber));Layer.define("grayscale",layerProperty("grayscale","webkitFilter",0,_.isNumber));Layer.define("sepia",layerProperty("sepia","webkitFilter",0,_.isNumber));Layer.define("backgroundColor",layerStyleProperty("backgroundColor"));Layer.define("borderRadius",layerStyleProperty("borderRadius"));Layer.define("borderColor",layerStyleProperty("borderColor"));Layer.define("borderWidth",layerStyleProperty("borderWidth"));Layer.define("name",{exportable:true,"default":"",get:function(){return this._getPropertyValue("name")},set:function(value){this._setPropertyValue("name",value);return this._element.setAttribute("name",value)}});Layer.define("frame",{get:function(){return new Frame(this)},set:function(frame){var k,_i,_len,_ref,_results;if(!frame){return}_ref=["x","y","width","height"];_results=[];for(_i=0,_len=_ref.length;_i<_len;_i++){k=_ref[_i];_results.push(this[k]=frame[k])}return _results}});Layer.define("minX",frameProperty("minX"));Layer.define("midX",frameProperty("midX"));Layer.define("maxX",frameProperty("maxX"));Layer.define("minY",frameProperty("minY"));Layer.define("midY",frameProperty("midY"));Layer.define("maxY",frameProperty("maxY"));Layer.prototype.convertPoint=function(point){return Utils.convertPoint(point,null,this)};Layer.prototype.screenFrame=function(){return Utils.convertPoint(this.frame,this,null)};Layer.prototype.contentFrame=function(){return Utils.frameMerge(this.subLayers.map(function(layer){return layer.frame.properties}))};Layer.prototype.centerFrame=function(){var frame;if(this.superLayer){frame=this.frame;frame.midX=parseInt(this.superLayer.width/2);frame.midY=parseInt(this.superLayer.height/2);return frame}else{frame=this.frame;frame.midX=parseInt(window.innerWidth/2);frame.midY=parseInt(window.innerHeight/2);return frame}};Layer.prototype.center=function(){return this.frame=this.centerFrame()};Layer.prototype.centerX=function(){return this.x=this.centerFrame().x};Layer.prototype.centerY=function(){return this.y=this.centerFrame().y};Layer.prototype.pixelAlign=function(){this.x=parseInt(this.x);return this.y=parseInt(this.y)};Layer.define("style",{get:function(){return this._element.style},set:function(value){_.extend(this._element.style,value);return this.emit("change:style")}});Layer.define("html",{get:function(){var _ref;return(_ref=this._elementHTML)!=null?_ref.innerHTML:void 0},set:function(value){if(!this._elementHTML){this._elementHTML=document.createElement("div");this._element.appendChild(this._elementHTML)}this._elementHTML.innerHTML=value;if(!(this._elementHTML.childNodes.length===1&&this._elementHTML.childNodes[0].nodeName==="#text")){this.ignoreEvents=false}return this.emit("change:html")}});Layer.prototype.computedStyle=function(){return document.defaultView.getComputedStyle(this._element)};Layer.prototype._setDefaultCSS=function(){return this.style=Config.layerBaseCSS};Layer.define("classList",{get:function(){return this._element.classList}});Layer.prototype._createElement=function(){if(this._element!=null){return}return this._element=document.createElement("div")};Layer.prototype._insertElement=function(){return Utils.domComplete(this.__insertElement)};Layer.prototype.__insertElement=function(){if(!_RootElement){_RootElement=document.createElement("div");_RootElement.id="FramerRoot";_.extend(_RootElement.style,Config.rootBaseCSS);document.body.appendChild(_RootElement)}return _RootElement.appendChild(this._element)};Layer.prototype.destroy=function(){if(this.superLayer){this.superLayer._subLayers=_.without(this.superLayer._subLayers,this)}this._element.parentNode.removeChild(this._element);this.removeAllListeners();return _LayerList=_.without(_LayerList,this)};Layer.prototype.copy=function(){var copiedSublayer,layer,subLayer,_i,_len,_ref;layer=this.copySingle();_ref=this.subLayers;for(_i=0,_len=_ref.length;_i<_len;_i++){subLayer=_ref[_i];copiedSublayer=subLayer.copy();copiedSublayer.superLayer=layer}return layer};Layer.prototype.copySingle=function(){return new Layer(this.properties)};Layer.prototype.animate=function(options){var animation;options.layer=this;options.curveOptions=options;animation=new Animation(options);animation.start();return animation};Layer.define("image",{exportable:true,"default":"",get:function(){return this._getPropertyValue("image")},set:function(value){var currentValue,imageUrl,loader,_ref,_ref1,_this=this;currentValue=this._getPropertyValue("image");if(currentValue===value){return this.emit("load")}this.backgroundColor=null;this._setPropertyValue("image",value);imageUrl=value;if((_ref=this.events)!=null?_ref.hasOwnProperty("load"||((_ref1=this.events)!=null?_ref1.hasOwnProperty("error"):void 0)):void 0){loader=new Image;loader.name=imageUrl;loader.src=imageUrl;loader.onload=function(){_this.style["background-image"]="url('"+imageUrl+"')";return _this.emit("load",loader)};return loader.onerror=function(){return _this.emit("error",loader)}}else{return this.style["background-image"]="url('"+imageUrl+"')"}}});Layer.define("superLayer",{exportable:false,get:function(){return this._superLayer||null},set:function(layer){if(layer===this._superLayer){return}if(!layer instanceof Layer){throw Error("Layer.superLayer needs to be a Layer object")}Utils.domCompleteCancel(this.__insertElement);if(this._superLayer){this._superLayer._subLayers=_.without(this._superLayer._subLayers,this);this._superLayer._element.removeChild(this._element);this._superLayer.emit("change:subLayers",{added:[],removed:[this]})}if(layer){layer._element.appendChild(this._element);layer._subLayers.push(this);layer.emit("change:subLayers",{added:[this],removed:[]})}else{this._insertElement()}this._superLayer=layer;this.bringToFront();return this.emit("change:superLayer")}});Layer.prototype.superLayers=function(){var recurse,superLayers;superLayers=[];recurse=function(layer){if(!layer.superLayer){return}superLayers.push(layer.superLayer);return recurse(layer.superLayer)};recurse(this);return superLayers};Layer.define("subLayers",{exportable:false,get:function(){return _.clone(this._subLayers)}});Layer.define("siblingLayers",{exportable:false,get:function(){var _this=this;if(this.superLayer===null){return _.filter(_LayerList,function(layer){return layer!==_this&&layer.superLayer===null})}return _.without(this.superLayer.subLayers,this)}});Layer.prototype.addSubLayer=function(layer){return layer.superLayer=this};Layer.prototype.removeSubLayer=function(layer){if(__indexOf.call(this.subLayers,layer)<0){return}return layer.superLayer=null};Layer.prototype.subLayersByName=function(name){return _.filter(this.subLayers,function(layer){return layer.name===name})};Layer.prototype.animate=function(options){var animation,start;start=options.start;if(start==null){start=true}delete options.start;options.layer=this;animation=new Animation(options);if(start){animation.start()}return animation};Layer.prototype.animations=function(){var _this=this;return _.filter(Animation.runningAnimations(),function(a){return a.options.layer===_this})};Layer.prototype.animateStop=function(){return _.invoke(this.animations(),"stop")};Layer.prototype.bringToFront=function(){return this.index=_.max(_.union([0],this.siblingLayers.map(function(layer){return layer.index})))+1};Layer.prototype.sendToBack=function(){return this.index=_.min(_.union([0],this.siblingLayers.map(function(layer){return layer.index})))-1};Layer.prototype.placeBefore=function(layer){var l,_i,_len,_ref;if(__indexOf.call(this.siblingLayers,layer)<0){return}_ref=this.siblingLayers;for(_i=0,_len=_ref.length;_i<_len;_i++){l=_ref[_i];if(l.index<=layer.index){l.index-=1}}return this.index=layer.index+1};Layer.prototype.placeBehind=function(layer){var l,_i,_len,_ref;if(__indexOf.call(this.siblingLayers,layer)<0){return}_ref=this.siblingLayers;for(_i=0,_len=_ref.length;_i<_len;_i++){l=_ref[_i];if(l.index>=layer.index){l.index+=1}}return this.index=layer.index-1};Layer.define("states",{get:function(){return this._states!=null?this._states:this._states=new LayerStates(this)}});Layer.define("draggable",{get:function(){if(this._draggable==null){this._draggable=new LayerDraggable(this)}return this._draggable}});Layer.define("scrollFrame",{get:function(){return new Frame({x:this.scrollX,y:this.scrollY,width:this.width,height:this.height})},set:function(frame){this.scrollX=frame.x;return this.scrollY=frame.y}});Layer.define("scrollX",{get:function(){return this._element.scrollLeft},set:function(value){return this._element.scrollLeft=value}});Layer.define("scrollY",{get:function(){return this._element.scrollTop},set:function(value){return this._element.scrollTop=value}});Layer.prototype.addListener=function(event,originalListener){var listener,_base,_this=this;listener=function(){var args;args=1<=arguments.length?__slice.call(arguments,0):[];return originalListener.call.apply(originalListener,[_this].concat(__slice.call(args),[_this]))};originalListener.modifiedListener=listener;Layer.__super__.addListener.call(this,event,listener);this._element.addEventListener(event,listener);if(this._eventListeners==null){this._eventListeners={}}if((_base=this._eventListeners)[event]==null){_base[event]=[]}this._eventListeners[event].push(listener);return this.ignoreEvents=false};Layer.prototype.removeListener=function(event,listener){if(listener.modifiedListener){listener=listener.modifiedListener}Layer.__super__.removeListener.call(this,event,listener);this._element.removeEventListener(event,listener);return this._eventListeners[event]=_.without(this._eventListeners[event],listener)};Layer.prototype.removeAllListeners=function(){var eventName,listener,listeners,_ref,_results;if(!this._eventListeners){return}_ref=this._eventListeners;_results=[];for(eventName in _ref){listeners=_ref[eventName];_results.push(function(){var _i,_len,_results1;_results1=[];for(_i=0,_len=listeners.length;_i<_len;_i++){listener=listeners[_i];_results1.push(this.removeListener(eventName,listener))}return _results1}.call(this))}return _results};Layer.prototype.on=Layer.prototype.addListener;Layer.prototype.off=Layer.prototype.removeListener;return Layer}(BaseClass);exports.Layer.Layers=function(){return _.clone(_LayerList)}},{"./Animation":1,"./BaseClass":8,"./Config":10,"./Defaults":12,"./EventEmitter":13,"./Frame":15,"./LayerDraggable":19,"./LayerStates":20,"./LayerStyle":21,"./Underscore":22,"./Utils":23}],19:[function(require,module,exports){var EventEmitter,Events,Utils,_,__bind=function(fn,me){return function(){return fn.apply(me,arguments)}},__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child};_=require("./Underscore");Utils=require("./Utils");EventEmitter=require("./EventEmitter").EventEmitter;Events=require("./Events").Events;Events.DragStart="dragstart";Events.DragMove="dragmove";Events.DragEnd="dragend";"This takes any layer and makes it draggable by the user on mobile or desktop.\n\nSome interesting things are:\n\n- The draggable.calculateVelocity().x|y contains the current average speed \n  in the last 100ms (defined with VelocityTimeOut).\n- You can enable/disable or slowdown/speedup scrolling with\n  draggable.speed.x|y\n";exports.LayerDraggable=function(_super){__extends(LayerDraggable,_super);LayerDraggable.VelocityTimeOut=100;function LayerDraggable(layer){this.layer=layer;this._touchEnd=__bind(this._touchEnd,this);this._touchStart=__bind(this._touchStart,this);this._updatePosition=__bind(this._updatePosition,this);this.speedX=1;this.speedY=1;this._deltas=[];this._isDragging=false;this.enabled=true;this.attach()}LayerDraggable.prototype.attach=function(){return this.layer.on(Events.TouchStart,this._touchStart)};LayerDraggable.prototype.remove=function(){return this.layer.off(Events.TouchStart,this._touchStart)};LayerDraggable.prototype.emit=function(eventName,event){this.layer.emit(eventName,event);return LayerDraggable.__super__.emit.call(this,eventName,event)};LayerDraggable.prototype.calculateVelocity=function(){var curr,prev,time,timeSinceLastMove,velocity;if(this._deltas.length<2){return{x:0,y:0}}curr=this._deltas.slice(-1)[0];prev=this._deltas.slice(-2,-1)[0];time=curr.t-prev.t;timeSinceLastMove=(new Date).getTime()-prev.t;if(timeSinceLastMove>this.VelocityTimeOut){return{x:0,y:0}}velocity={x:(curr.x-prev.x)/time,y:(curr.y-prev.y)/time};if(velocity.x===Infinity){velocity.x=0}if(velocity.y===Infinity){velocity.y=0}return velocity};LayerDraggable.prototype._updatePosition=function(event){var correctedDelta,delta,touchEvent,_this=this;if(this.enabled===false){return}this.emit(Events.DragMove,event);touchEvent=Events.touchEvent(event);delta={x:touchEvent.clientX-this._start.x,y:touchEvent.clientY-this._start.y};correctedDelta={x:delta.x*this.speedX,y:delta.y*this.speedY,t:event.timeStamp};window.requestAnimationFrame(function(){_this.layer.x=_this._start.x+correctedDelta.x-_this._offset.x;return _this.layer.y=_this._start.y+correctedDelta.y-_this._offset.y});this._deltas.push(correctedDelta);return this.emit(Events.DragMove,event)};LayerDraggable.prototype._touchStart=function(event){var touchEvent;this.layer.animateStop();this._isDragging=true;touchEvent=Events.touchEvent(event);this._start={x:touchEvent.clientX,y:touchEvent.clientY};this._offset={x:touchEvent.clientX-this.layer.x,y:touchEvent.clientY-this.layer.y};document.addEventListener(Events.TouchMove,this._updatePosition);document.addEventListener(Events.TouchEnd,this._touchEnd);return this.emit(Events.DragStart,event)};LayerDraggable.prototype._touchEnd=function(event){this._isDragging=false;document.removeEventListener(Events.TouchMove,this._updatePosition);document.removeEventListener(Events.TouchEnd,this._touchEnd);this.emit(Events.DragEnd,event);return this._deltas=[]};return LayerDraggable}(EventEmitter)},{"./EventEmitter":13,"./Events":14,"./Underscore":22,"./Utils":23}],20:[function(require,module,exports){var BaseClass,Defaults,Events,LayerStatesIgnoredKeys,_,__hasProp={}.hasOwnProperty,__extends=function(child,parent){for(var key in parent){if(__hasProp.call(parent,key))child[key]=parent[key]}function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor;child.__super__=parent.prototype;return child},__indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++){if(i in this&&this[i]===item)return i}return-1};_=require("./Underscore")._;Events=require("./Events").Events;BaseClass=require("./BaseClass").BaseClass;Defaults=require("./Defaults").Defaults;LayerStatesIgnoredKeys=["ignoreEvents"];Events.StateWillSwitch="willSwitch";Events.StateDidSwitch="didSwitch";exports.LayerStates=function(_super){__extends(LayerStates,_super);function LayerStates(layer){this.layer=layer;this._states={};this._orderedStates=[];this.animationOptions={};this.add("default",this.layer.properties);this._currentState="default";this._previousStates=[];LayerStates.__super__.constructor.apply(this,arguments)}LayerStates.prototype.add=function(stateName,properties){var error,k,v;if(_.isObject(stateName)){for(k in stateName){v=stateName[k];this.add(k,v)}return}error=function(){throw Error('Usage example: layer.states.add("someName", {x:500})')};if(!_.isString(stateName)){error()}if(!_.isObject(properties)){error()}this._orderedStates.push(stateName);return this._states[stateName]=properties};LayerStates.prototype.remove=function(stateName){if(!this._states.hasOwnProperty(stateName)){return}delete this._states[stateName];return this._orderedStates=_.without(this._orderedStates,stateName)};LayerStates.prototype["switch"]=function(stateName,animationOptions,instant){var animatingKeys,properties,propertyName,value,_ref,_this=this;if(instant==null){instant=false}if(!this._states.hasOwnProperty(stateName)){throw Error("No such state: '"+stateName+"'")}this.emit(Events.StateWillSwitch,this._currentState,stateName,this);this._previousStates.push(this._currentState);this._currentState=stateName;properties={};animatingKeys=this.animatingKeys();_ref=this._states[stateName];for(propertyName in _ref){value=_ref[propertyName];if(__indexOf.call(LayerStatesIgnoredKeys,propertyName)>=0){continue}if(__indexOf.call(animatingKeys,propertyName)<0){continue}if(_.isFunction(value)){value=value.call(this.layer,this.layer,stateName)}properties[propertyName]=value}if(instant===true){this.layer.properties=properties;return this.emit(Events.StateDidSwitch,_.last(this._previousStates),stateName,this)}else{if(animationOptions==null){animationOptions=this.animationOptions}animationOptions.properties=properties;this._animation=this.layer.animate(animationOptions);return this._animation.on("stop",function(){return _this.emit(Events.StateDidSwitch,_.last(_this._previousStates),stateName,_this)})}};LayerStates.prototype.switchInstant=function(stateName){return this["switch"](stateName,null,true)};LayerStates.define("state",{get:function(){return this._currentState}});LayerStates.define("current",{get:function(){return this._currentState}});LayerStates.prototype.states=function(){return _.clone(this._orderedStates)};LayerStates.prototype.animatingKeys=function(){var keys,state,stateName,_ref;keys=[];_ref=this._states;for(stateName in _ref){state=_ref[stateName];if(stateName==="default"){continue}keys=_.union(keys,_.keys(state))}return keys};LayerStates.prototype.previous=function(states,animationOptions){if(states==null){states=this.states()}return this["switch"](Utils.arrayPrev(states,this._currentState),animationOptions)};LayerStates.prototype.next=function(){var states;states=Utils.arrayFromArguments(arguments);if(!states.length){states=this.states()}return this["switch"](Utils.arrayNext(states,this._currentState))};LayerStates.prototype.last=function(animationOptions){return this["switch"](_.last(this._previousStates),animationOptions)};return LayerStates}(BaseClass)},{"./BaseClass":8,"./Defaults":12,"./Events":14,"./Underscore":22}],21:[function(require,module,exports){var filterFormat,_WebkitProperties;filterFormat=function(value,unit){return""+Utils.round(value,2)+unit};_WebkitProperties=[["blur","blur",0,"px"],["brightness","brightness",100,"%"],["saturate","saturate",100,"%"],["hue-rotate","hueRotate",0,"deg"],["contrast","contrast",100,"%"],["invert","invert",0,"%"],["grayscale","grayscale",0,"%"],["sepia","sepia",0,"%"]];exports.LayerStyle={width:function(layer){return layer.width+"px"},height:function(layer){return layer.height+"px"},display:function(layer){if(layer.visible===true){return"block"}return"none"},opacity:function(layer){return layer.opacity},overflow:function(layer){if(layer.scrollHorizontal===true||layer.scrollVertical===true){return"auto"}if(layer.clip===true){return"hidden"}return"visible"},overflowX:function(layer){if(layer.scrollHorizontal===true){return"scroll"}if(layer.clip===true){return"hidden"}return"visible"},overflowY:function(layer){if(layer.scrollVertical===true){return"scroll"}if(layer.clip===true){return"hidden"}return"visible"},zIndex:function(layer){return layer.index},webkitFilter:function(layer){var css,cssName,fallback,layerName,unit,_i,_len,_ref;css=[];for(_i=0,_len=_WebkitProperties.length;_i<_len;_i++){_ref=_WebkitProperties[_i],cssName=_ref[0],layerName=_ref[1],fallback=_ref[2],unit=_ref[3];if(layer[layerName]!==fallback){css.push(""+cssName+"("+filterFormat(layer[layerName],unit)+")")}}return css.join(" ")},webkitTransform:function(layer){return"		translate3d("+layer.x+"px,"+layer.y+"px,"+layer.z+"px) 		scale("+layer.scale+")		scale3d("+layer.scaleX+","+layer.scaleY+","+layer.scaleZ+") 		rotateX("+layer.rotationX+"deg) 		rotateY("+layer.rotationY+"deg) 		rotateZ("+layer.rotationZ+"deg) 		"},webkitTransformOrigin:function(layer){return""+layer.originX*100+"% "+layer.originY*100+"%"},pointerEvents:function(layer){if(layer.ignoreEvents){return"none"}return"auto"}}},{}],22:[function(require,module,exports){var _;_=require("lodash");_.str=require("underscore.string");_.mixin(_.str.exports());_.isBool=function(v){return typeof v==="boolean"};exports._=_},{lodash:24,"underscore.string":25}],23:[function(require,module,exports){var Utils,_,__domComplete,__slice=[].slice,_this=this;_=require("./Underscore")._;Utils={};Utils.setDefaultProperties=function(obj,defaults,warn){var k,result,v;if(warn==null){warn=true}result={};for(k in defaults){v=defaults[k];if(obj.hasOwnProperty(k)){result[k]=obj[k]}else{result[k]=defaults[k]}}if(warn){for(k in obj){v=obj[k];if(!defaults.hasOwnProperty(k)){console.warn("Utils.setDefaultProperties: got unexpected option: '"+k+" -> "+v+"'",obj)}}}return result};Utils.valueOrDefault=function(value,defaultValue){if(value===void 0||value===null){value=defaultValue}return value};Utils.arrayToObject=function(arr){var item,obj,_i,_len;obj={};for(_i=0,_len=arr.length;_i<_len;_i++){item=arr[_i];obj[item[0]]=item[1]}return obj};Utils.arrayNext=function(arr,item){return arr[arr.indexOf(item)+1]||_.first(arr)};Utils.arrayPrev=function(arr,item){return arr[arr.indexOf(item)-1]||_.last(arr)};if(window.requestAnimationFrame==null){window.requestAnimationFrame=window.webkitRequestAnimationFrame}if(window.requestAnimationFrame==null){window.requestAnimationFrame=function(f){return Utils.delay(1/60,f)}}Utils.getTime=function(){return Date.now()/1e3};Utils.delay=function(time,f){var timer;timer=setTimeout(f,time*1e3);return timer};Utils.interval=function(time,f){var timer;timer=setInterval(f,time*1e3);return timer};Utils.debounce=function(threshold,fn,immediate){var timeout;if(threshold==null){threshold=.1}timeout=null;threshold*=1e3;return function(){var args,delayed,obj;args=1<=arguments.length?__slice.call(arguments,0):[];obj=this;delayed=function(){if(!immediate){fn.apply(obj,args)}return timeout=null};if(timeout){clearTimeout(timeout)}else if(immediate){fn.apply(obj,args)}return timeout=setTimeout(delayed,threshold)}};Utils.throttle=function(delay,fn){var timer;if(delay===0){return fn}delay*=1e3;timer=false;return function(){if(timer){return}timer=true;if(delay!==-1){setTimeout(function(){return timer=false},delay)}return fn.apply(null,arguments)}};Utils.randomColor=function(alpha){var c;if(alpha==null){alpha=1}c=function(){return parseInt(Math.random()*255)};return"rgba("+c()+", "+c()+", "+c()+", "+alpha+")"};Utils.randomChoice=function(arr){return arr[Math.floor(Math.random()*arr.length)]};Utils.randomNumber=function(a,b){if(a==null){a=0}if(b==null){b=1}return Utils.mapRange(Math.random(),0,1,a,b)};Utils.labelLayer=function(layer,text,style){if(style==null){style={}}style=_.extend({font:"10px/1em Menlo",lineHeight:""+layer.height+"px",textAlign:"center",color:"#fff"},style);layer.style=style;return layer.html=text};Utils.uuid=function(){var chars,digit,output,r,random,_i;chars="0123456789abcdefghijklmnopqrstuvwxyz".split("");output=new Array(36);random=0;for(digit=_i=1;_i<=32;digit=++_i){if(random<=2){random=33554432+Math.random()*16777216|0}r=random&15;random=random>>4;output[digit]=chars[digit===19?r&3|8:r]}return output.join("")};Utils.arrayFromArguments=function(args){if(_.isArray(args[0])){return args[0]}return Array.prototype.slice.call(args)};Utils.cycle=function(){var args,curr;args=Utils.arrayFromArguments(arguments);curr=-1;return function(){curr++;if(curr>=args.length){curr=0
}return args[curr]}};Utils.toggle=Utils.cycle;Utils.isWebKit=function(){return window.WebKitCSSMatrix!==null};Utils.isTouch=function(){return window.ontouchstart===null};Utils.isMobile=function(){return/iphone|ipod|android|ie|blackberry|fennec/.test(navigator.userAgent.toLowerCase())};Utils.isChrome=function(){return/chrome/.test(navigator.userAgent.toLowerCase())};Utils.isLocal=function(){return Utils.isLocalUrl(window.location.href)};Utils.isLocalUrl=function(url){return url.slice(0,7)==="file://"};Utils.devicePixelRatio=function(){return window.devicePixelRatio};Utils.pathJoin=function(){return Utils.arrayFromArguments(arguments).join("/")};Utils.round=function(value,decimals){var d;d=Math.pow(10,decimals);return Math.round(value*d)/d};Utils.mapRange=function(value,fromLow,fromHigh,toLow,toHigh){return toLow+(value-fromLow)/(fromHigh-fromLow)*(toHigh-toLow)};Utils.modulate=function(value,rangeA,rangeB,limit){var fromHigh,fromLow,result,toHigh,toLow;if(limit==null){limit=false}fromLow=rangeA[0],fromHigh=rangeA[1];toLow=rangeB[0],toHigh=rangeB[1];result=toLow+(value-fromLow)/(fromHigh-fromLow)*(toHigh-toLow);if(limit===true){if(result<toLow){return toLow}if(result>toHigh){return toHigh}}return result};Utils.parseFunction=function(str){var result;result={name:"",args:[]};if(_.endsWith(str,")")){result.name=str.split("(")[0];result.args=str.split("(")[1].split(",").map(function(a){return _.trim(_.rtrim(a,")"))})}else{result.name=str}return result};__domComplete=[];if(typeof document!=="undefined"&&document!==null){document.onreadystatechange=function(event){var f,_results;if(document.readyState==="complete"){_results=[];while(__domComplete.length){_results.push(f=__domComplete.shift()())}return _results}}}Utils.domComplete=function(f){if(document.readyState==="complete"){return f()}else{return __domComplete.push(f)}};Utils.domCompleteCancel=function(f){return __domComplete=_.without(__domComplete,f)};Utils.domLoadScript=function(url,callback){var head,script;script=document.createElement("script");script.type="text/javascript";script.src=url;script.onload=callback;head=document.getElementsByTagName("head")[0];head.appendChild(script);return script};Utils.domLoadData=function(path,callback){var request;request=new XMLHttpRequest;request.addEventListener("load",function(){return callback(null,request.responseText)},false);request.addEventListener("error",function(){return callback(true,null)},false);request.open("GET",path,true);return request.send(null)};Utils.domLoadJSON=function(path,callback){return Utils.domLoadData(path,function(err,data){return callback(err,JSON.parse(data))})};Utils.domLoadDataSync=function(path){var data,e,request;request=new XMLHttpRequest;request.open("GET",path,false);try{request.send(null)}catch(_error){e=_error;console.debug("XMLHttpRequest.error",e)}data=request.responseText;if(!data){throw Error("Utils.domLoadDataSync: no data was loaded (url not found?)")}return request.responseText};Utils.domLoadJSONSync=function(path){return JSON.parse(Utils.domLoadDataSync(path))};Utils.domLoadScriptSync=function(path){var scriptData;scriptData=Utils.domLoadDataSync(path);eval(scriptData);return scriptData};Utils.pointMin=function(){var point,points;points=Utils.arrayFromArguments(arguments);return point={x:_.min(point.map(function(size){return size.x})),y:_.min(point.map(function(size){return size.y}))}};Utils.pointMax=function(){var point,points;points=Utils.arrayFromArguments(arguments);return point={x:_.max(point.map(function(size){return size.x})),y:_.max(point.map(function(size){return size.y}))}};Utils.pointDistance=function(pointA,pointB){var distance;return distance={x:Math.abs(pointB.x-pointA.x),y:Math.abs(pointB.y-pointA.y)}};Utils.pointInvert=function(point){return point={x:0-point.x,y:0-point.y}};Utils.pointTotal=function(point){return point.x+point.y};Utils.pointAbs=function(point){return point={x:Math.abs(point.x),y:Math.abs(point.y)}};Utils.pointInFrame=function(point,frame){if(point.x<frame.minX||point.x>frame.maxX){return false}if(point.y<frame.minY||point.y>frame.maxY){return false}return true};Utils.sizeMin=function(){var size,sizes;sizes=Utils.arrayFromArguments(arguments);return size={width:_.min(sizes.map(function(size){return size.width})),height:_.min(sizes.map(function(size){return size.height}))}};Utils.sizeMax=function(){var size,sizes;sizes=Utils.arrayFromArguments(arguments);return size={width:_.max(sizes.map(function(size){return size.width})),height:_.max(sizes.map(function(size){return size.height}))}};Utils.frameGetMinX=function(frame){return frame.x};Utils.frameSetMinX=function(frame,value){return frame.x=value};Utils.frameGetMidX=function(frame){if(frame.width===0){return 0}else{return frame.x+frame.width/2}};Utils.frameSetMidX=function(frame,value){return frame.x=frame.width===0?0:value-frame.width/2};Utils.frameGetMaxX=function(frame){if(frame.width===0){return 0}else{return frame.x+frame.width}};Utils.frameSetMaxX=function(frame,value){return frame.x=frame.width===0?0:value-frame.width};Utils.frameGetMinY=function(frame){return frame.y};Utils.frameSetMinY=function(frame,value){return frame.y=value};Utils.frameGetMidY=function(frame){if(frame.height===0){return 0}else{return frame.y+frame.height/2}};Utils.frameSetMidY=function(frame,value){return frame.y=frame.height===0?0:value-frame.height/2};Utils.frameGetMaxY=function(frame){if(frame.height===0){return 0}else{return frame.y+frame.height}};Utils.frameSetMaxY=function(frame,value){return frame.y=frame.height===0?0:value-frame.height};Utils.frameSize=function(frame){var size;return size={width:frame.width,height:frame.height}};Utils.framePoint=function(frame){var point;return point={x:frame.x,y:frame.y}};Utils.frameMerge=function(){var frame,frames;frames=Utils.arrayFromArguments(arguments);frame={x:_.min(frames.map(Utils.frameGetMinX)),y:_.min(frames.map(Utils.frameGetMinY))};frame.width=_.max(frames.map(Utils.frameGetMaxX))-frame.x;frame.height=_.max(frames.map(Utils.frameGetMaxY))-frame.y;return frame};Utils.convertPoint=function(input,layerA,layerB){var k,layer,point,superLayersA,superLayersB,_i,_j,_k,_len,_len1,_len2,_ref;point={};_ref=["x","y","width","height"];for(_i=0,_len=_ref.length;_i<_len;_i++){k=_ref[_i];point[k]=input[k]}superLayersA=(layerA!=null?layerA.superLayers():void 0)||[];superLayersB=(layerB!=null?layerB.superLayers():void 0)||[];if(layerB){superLayersB.push(layerB)}for(_j=0,_len1=superLayersA.length;_j<_len1;_j++){layer=superLayersA[_j];point.x+=layer.x-layer.scrollFrame.x;point.y+=layer.y-layer.scrollFrame.y}for(_k=0,_len2=superLayersB.length;_k<_len2;_k++){layer=superLayersB[_k];point.x-=layer.x+layer.scrollFrame.x;point.y-=layer.y+layer.scrollFrame.y}return point};_.extend(exports,Utils)},{"./Underscore":22}],24:[function(require,module,exports){var global=typeof self!=="undefined"?self:typeof window!=="undefined"?window:{};(function(){var undefined;var arrayPool=[],objectPool=[];var idCounter=0;var keyPrefix=+new Date+"";var largeArraySize=75;var maxPoolSize=40;var whitespace=" 	\f ﻿"+"\n\r\u2028\u2029"+" ᠎             　";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reFuncName=/^\s*function[ \n\r\t]+\w/;var reInterpolate=/<%=([\s\S]+?)%>/g;var reLeadingSpacesAndZeros=RegExp("^["+whitespace+"]*0+(?=.$)");var reNoMatch=/($^)/;var reThis=/\bthis\b/;var reUnescapedString=/['\n\r\t\u2028\u2029\\]/g;var contextProps=["Array","Boolean","Date","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"];var templateCounter=0;var argsClass="[object Arguments]",arrayClass="[object Array]",boolClass="[object Boolean]",dateClass="[object Date]",funcClass="[object Function]",numberClass="[object Number]",objectClass="[object Object]",regexpClass="[object RegExp]",stringClass="[object String]";var cloneableClasses={};cloneableClasses[funcClass]=false;cloneableClasses[argsClass]=cloneableClasses[arrayClass]=cloneableClasses[boolClass]=cloneableClasses[dateClass]=cloneableClasses[numberClass]=cloneableClasses[objectClass]=cloneableClasses[regexpClass]=cloneableClasses[stringClass]=true;var debounceOptions={leading:false,maxWait:0,trailing:false};var descriptor={configurable:false,enumerable:false,value:null,writable:false};var objectTypes={"boolean":false,"function":true,object:true,number:false,string:false,undefined:false};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};var root=objectTypes[typeof window]&&window||this;var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var freeGlobal=objectTypes[typeof global]&&global;if(freeGlobal&&(freeGlobal.global===freeGlobal||freeGlobal.window===freeGlobal)){root=freeGlobal}function baseIndexOf(array,value,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0;while(++index<length){if(array[index]===value){return index}}return-1}function cacheIndexOf(cache,value){var type=typeof value;cache=cache.cache;if(type=="boolean"||value==null){return cache[value]?0:-1}if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value;cache=(cache=cache[type])&&cache[key];return type=="object"?cache&&baseIndexOf(cache,value)>-1?0:-1:cache?0:-1}function cachePush(value){var cache=this.cache,type=typeof value;if(type=="boolean"||value==null){cache[value]=true}else{if(type!="number"&&type!="string"){type="object"}var key=type=="number"?value:keyPrefix+value,typeCache=cache[type]||(cache[type]={});if(type=="object"){(typeCache[key]||(typeCache[key]=[])).push(value)}else{typeCache[key]=true}}}function charAtCallback(value){return value.charCodeAt(0)}function compareAscending(a,b){var ac=a.criteria,bc=b.criteria,index=-1,length=ac.length;while(++index<length){var value=ac[index],other=bc[index];if(value!==other){if(value>other||typeof value=="undefined"){return 1}if(value<other||typeof other=="undefined"){return-1}}}return a.index-b.index}function createCache(array){var index=-1,length=array.length,first=array[0],mid=array[length/2|0],last=array[length-1];if(first&&typeof first=="object"&&mid&&typeof mid=="object"&&last&&typeof last=="object"){return false}var cache=getObject();cache["false"]=cache["null"]=cache["true"]=cache["undefined"]=false;var result=getObject();result.array=array;result.cache=cache;result.push=cachePush;while(++index<length){result.push(array[index])}return result}function escapeStringChar(match){return"\\"+stringEscapes[match]}function getArray(){return arrayPool.pop()||[]}function getObject(){return objectPool.pop()||{array:null,cache:null,criteria:null,"false":false,index:0,"null":false,number:null,object:null,push:null,string:null,"true":false,undefined:false,value:null}}function releaseArray(array){array.length=0;if(arrayPool.length<maxPoolSize){arrayPool.push(array)}}function releaseObject(object){var cache=object.cache;if(cache){releaseObject(cache)}object.array=object.cache=object.criteria=object.object=object.number=object.string=object.value=null;if(objectPool.length<maxPoolSize){objectPool.push(object)}}function slice(array,start,end){start||(start=0);if(typeof end=="undefined"){end=array?array.length:0}var index=-1,length=end-start||0,result=Array(length<0?0:length);while(++index<length){result[index]=array[start+index]}return result}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Boolean=context.Boolean,Date=context.Date,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayRef=[];var objectProto=Object.prototype;var oldDash=context._;var toString=objectProto.toString;var reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,fnToString=Function.prototype.toString,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,hasOwnProperty=objectProto.hasOwnProperty,push=arrayRef.push,setTimeout=context.setTimeout,splice=arrayRef.splice,unshift=arrayRef.unshift;var defineProperty=function(){try{var o={},func=isNative(func=Object.defineProperty)&&func,result=func(o,o,o)&&func}catch(e){}return result}();var nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeIsFinite=context.isFinite,nativeIsNaN=context.isNaN,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeParseInt=context.parseInt,nativeRandom=Math.random;var ctorByClass={};ctorByClass[arrayClass]=Array;ctorByClass[boolClass]=Boolean;ctorByClass[dateClass]=Date;ctorByClass[funcClass]=Function;ctorByClass[objectClass]=Object;ctorByClass[numberClass]=Number;ctorByClass[regexpClass]=RegExp;ctorByClass[stringClass]=String;function lodash(value){return value&&typeof value=="object"&&!isArray(value)&&hasOwnProperty.call(value,"__wrapped__")?value:new lodashWrapper(value)}function lodashWrapper(value,chainAll){this.__chain__=!!chainAll;this.__wrapped__=value}lodashWrapper.prototype=lodash.prototype;var support=lodash.support={};support.funcDecomp=!isNative(context.WinRTError)&&reThis.test(runInContext);support.funcNames=typeof Function.name=="string";lodash.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function baseBind(bindData){var func=bindData[0],partialArgs=bindData[2],thisArg=bindData[4];function bound(){if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(this instanceof bound){var thisBinding=baseCreate(func.prototype),result=func.apply(thisBinding,args||arguments);return isObject(result)?result:thisBinding}return func.apply(thisArg,args||arguments)}setBindData(bound,bindData);return bound}function baseClone(value,isDeep,callback,stackA,stackB){if(callback){var result=callback(value);if(typeof result!="undefined"){return result}}var isObj=isObject(value);if(isObj){var className=toString.call(value);if(!cloneableClasses[className]){return value}var ctor=ctorByClass[className];switch(className){case boolClass:case dateClass:return new ctor(+value);case numberClass:case stringClass:return new ctor(value);case regexpClass:result=ctor(value.source,reFlags.exec(value));result.lastIndex=value.lastIndex;return result}}else{return value}var isArr=isArray(value);if(isDeep){var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}result=isArr?ctor(value.length):{}}else{result=isArr?slice(value):assign({},value)}if(isArr){if(hasOwnProperty.call(value,"index")){result.index=value.index}if(hasOwnProperty.call(value,"input")){result.input=value.input}}if(!isDeep){return result}stackA.push(value);stackB.push(result);(isArr?forEach:forOwn)(value,function(objValue,key){result[key]=baseClone(objValue,isDeep,callback,stackA,stackB)});if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseCreate(prototype,properties){return isObject(prototype)?nativeCreate(prototype):{}}if(!nativeCreate){baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}()}function baseCreateCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(typeof thisArg=="undefined"||!("prototype"in func)){return func}var bindData=func.__bindData__;if(typeof bindData=="undefined"){if(support.funcNames){bindData=!func.name}bindData=bindData||!support.funcDecomp;if(!bindData){var source=fnToString.call(func);if(!support.funcNames){bindData=!reFuncName.test(source)}if(!bindData){bindData=reThis.test(source);setBindData(func,bindData)}}}if(bindData===false||bindData!==true&&bindData[1]&1){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 2:return function(a,b){return func.call(thisArg,a,b)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)}}return bind(func,thisArg)}function baseCreateWrapper(bindData){var func=bindData[0],bitmask=bindData[1],partialArgs=bindData[2],partialRightArgs=bindData[3],thisArg=bindData[4],arity=bindData[5];var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,key=func;function bound(){var thisBinding=isBind?thisArg:this;if(partialArgs){var args=slice(partialArgs);push.apply(args,arguments)}if(partialRightArgs||isCurry){args||(args=slice(arguments));if(partialRightArgs){push.apply(args,partialRightArgs)}if(isCurry&&args.length<arity){bitmask|=16&~32;return baseCreateWrapper([func,isCurryBound?bitmask:bitmask&~3,args,null,thisArg,arity])}}args||(args=arguments);if(isBindKey){func=thisBinding[key]}if(this instanceof bound){thisBinding=baseCreate(func.prototype);var result=func.apply(thisBinding,args);return isObject(result)?result:thisBinding}return func.apply(thisBinding,args)}setBindData(bound,bindData);return bound}function baseDifference(array,values){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,isLarge=length>=largeArraySize&&indexOf===baseIndexOf,result=[];if(isLarge){var cache=createCache(values);if(cache){indexOf=cacheIndexOf;values=cache}else{isLarge=false}}while(++index<length){var value=array[index];if(indexOf(values,value)<0){result.push(value)}}if(isLarge){releaseObject(values)}return result}function baseFlatten(array,isShallow,isStrict,fromIndex){var index=(fromIndex||0)-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value&&typeof value=="object"&&typeof value.length=="number"&&(isArray(value)||isArguments(value))){if(!isShallow){value=baseFlatten(value,isShallow,isStrict)}var valIndex=-1,valLength=value.length,resIndex=result.length;result.length+=valLength;while(++valIndex<valLength){result[resIndex++]=value[valIndex]}}else if(!isStrict){result.push(value)}}return result}function baseIsEqual(a,b,callback,isWhere,stackA,stackB){if(callback){var result=callback(a,b);if(typeof result!="undefined"){return!!result}}if(a===b){return a!==0||1/a==1/b}var type=typeof a,otherType=typeof b;if(a===a&&!(a&&objectTypes[type])&&!(b&&objectTypes[otherType])){return false}if(a==null||b==null){return a===b}var className=toString.call(a),otherClass=toString.call(b);if(className==argsClass){className=objectClass}if(otherClass==argsClass){otherClass=objectClass}if(className!=otherClass){return false}switch(className){case boolClass:case dateClass:return+a==+b;case numberClass:return a!=+a?b!=+b:a==0?1/a==1/b:a==+b;case regexpClass:case stringClass:return a==String(b)}var isArr=className==arrayClass;if(!isArr){var aWrapped=hasOwnProperty.call(a,"__wrapped__"),bWrapped=hasOwnProperty.call(b,"__wrapped__");if(aWrapped||bWrapped){return baseIsEqual(aWrapped?a.__wrapped__:a,bWrapped?b.__wrapped__:b,callback,isWhere,stackA,stackB)}if(className!=objectClass){return false}var ctorA=a.constructor,ctorB=b.constructor;if(ctorA!=ctorB&&!(isFunction(ctorA)&&ctorA instanceof ctorA&&isFunction(ctorB)&&ctorB instanceof ctorB)&&("constructor"in a&&"constructor"in b)){return false}}var initedStack=!stackA;stackA||(stackA=getArray());stackB||(stackB=getArray());var length=stackA.length;while(length--){if(stackA[length]==a){return stackB[length]==b}}var size=0;result=true;stackA.push(a);stackB.push(b);if(isArr){length=a.length;size=b.length;result=size==length;if(result||isWhere){while(size--){var index=length,value=b[size];if(isWhere){while(index--){if(result=baseIsEqual(a[index],value,callback,isWhere,stackA,stackB)){break}}}else if(!(result=baseIsEqual(a[size],value,callback,isWhere,stackA,stackB))){break}}}}else{forIn(b,function(value,key,b){if(hasOwnProperty.call(b,key)){size++;return result=hasOwnProperty.call(a,key)&&baseIsEqual(a[key],value,callback,isWhere,stackA,stackB)}});if(result&&!isWhere){forIn(a,function(value,key,a){if(hasOwnProperty.call(a,key)){return result=--size>-1}})}}stackA.pop();stackB.pop();if(initedStack){releaseArray(stackA);releaseArray(stackB)}return result}function baseMerge(object,source,callback,stackA,stackB){(isArray(source)?forEach:forOwn)(source,function(source,key){var found,isArr,result=source,value=object[key];if(source&&((isArr=isArray(source))||isPlainObject(source))){var stackLength=stackA.length;while(stackLength--){if(found=stackA[stackLength]==source){value=stackB[stackLength];break}}if(!found){var isShallow;if(callback){result=callback(value,source);if(isShallow=typeof result!="undefined"){value=result}}if(!isShallow){value=isArr?isArray(value)?value:[]:isPlainObject(value)?value:{}}stackA.push(source);stackB.push(value);if(!isShallow){baseMerge(value,source,callback,stackA,stackB)}}}else{if(callback){result=callback(value,source);if(typeof result=="undefined"){result=source}}if(typeof result!="undefined"){value=result}}object[key]=value})}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseUniq(array,isSorted,callback){var index=-1,indexOf=getIndexOf(),length=array?array.length:0,result=[];var isLarge=!isSorted&&length>=largeArraySize&&indexOf===baseIndexOf,seen=callback||isLarge?getArray():result;if(isLarge){var cache=createCache(seen);indexOf=cacheIndexOf;seen=cache}while(++index<length){var value=array[index],computed=callback?callback(value,index,array):value;if(isSorted?!index||seen[seen.length-1]!==computed:indexOf(seen,computed)<0){if(callback||isLarge){seen.push(computed)}result.push(value)}}if(isLarge){releaseArray(seen.array);releaseObject(seen)}else if(callback){releaseArray(seen)}return result}function createAggregator(setter){return function(collection,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];setter(result,value,callback(value,index,collection),collection)}}else{forOwn(collection,function(value,key,collection){setter(result,value,callback(value,key,collection),collection)})}return result}}function createWrapper(func,bitmask,partialArgs,partialRightArgs,thisArg,arity){var isBind=bitmask&1,isBindKey=bitmask&2,isCurry=bitmask&4,isCurryBound=bitmask&8,isPartial=bitmask&16,isPartialRight=bitmask&32;if(!isBindKey&&!isFunction(func)){throw new TypeError}if(isPartial&&!partialArgs.length){bitmask&=~16;isPartial=partialArgs=false}if(isPartialRight&&!partialRightArgs.length){bitmask&=~32;isPartialRight=partialRightArgs=false}var bindData=func&&func.__bindData__;if(bindData&&bindData!==true){bindData=slice(bindData);if(bindData[2]){bindData[2]=slice(bindData[2])}if(bindData[3]){bindData[3]=slice(bindData[3])}if(isBind&&!(bindData[1]&1)){bindData[4]=thisArg}if(!isBind&&bindData[1]&1){bitmask|=8}if(isCurry&&!(bindData[1]&4)){bindData[5]=arity}if(isPartial){push.apply(bindData[2]||(bindData[2]=[]),partialArgs)}if(isPartialRight){unshift.apply(bindData[3]||(bindData[3]=[]),partialRightArgs)}bindData[1]|=bitmask;return createWrapper.apply(null,bindData)}var creater=bitmask==1||bitmask===17?baseBind:baseCreateWrapper;return creater([func,bitmask,partialArgs,partialRightArgs,thisArg,arity])}function escapeHtmlChar(match){return htmlEscapes[match]}function getIndexOf(){var result=(result=lodash.indexOf)===indexOf?baseIndexOf:result;return result}function isNative(value){return typeof value=="function"&&reNative.test(value)}var setBindData=!defineProperty?noop:function(func,value){descriptor.value=value;defineProperty(func,"__bindData__",descriptor)};function shimIsPlainObject(value){var ctor,result;if(!(value&&toString.call(value)==objectClass)||(ctor=value.constructor,isFunction(ctor)&&!(ctor instanceof ctor))){return false}forIn(value,function(value,key){result=key});return typeof result=="undefined"||hasOwnProperty.call(value,result)}function unescapeHtmlChar(match){return htmlUnescapes[match]}function isArguments(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==argsClass||false}var isArray=nativeIsArray||function(value){return value&&typeof value=="object"&&typeof value.length=="number"&&toString.call(value)==arrayClass||false};var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};var htmlUnescapes=invert(htmlEscapes);var reEscapedHtml=RegExp("("+keys(htmlUnescapes).join("|")+")","g"),reUnescapedHtml=RegExp("["+keys(htmlEscapes).join("")+"]","g");var assign=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;if(argsLength>3&&typeof args[argsLength-2]=="function"){var callback=baseCreateCallback(args[--argsLength-1],args[argsLength--],2)}else if(argsLength>2&&typeof args[argsLength-1]=="function"){callback=args[--argsLength]}while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];result[index]=callback?callback(result[index],iterable[index]):iterable[index]}}}return result};function clone(value,isDeep,callback,thisArg){if(typeof isDeep!="boolean"&&isDeep!=null){thisArg=callback;callback=isDeep;isDeep=false}return baseClone(value,isDeep,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}function cloneDeep(value,callback,thisArg){return baseClone(value,true,typeof callback=="function"&&baseCreateCallback(callback,thisArg,1))}function create(prototype,properties){var result=baseCreate(prototype);return properties?assign(result,properties):result}var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=="undefined")result[index]=iterable[index]}}}return result};function findKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}function findLastKey(object,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forOwnRight(object,function(value,key,object){if(callback(value,key,object)){result=key;return false}});return result}var forIn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);for(index in iterable){if(callback(iterable[index],index,collection)===false)return result}return result};function forInRight(object,callback,thisArg){var pairs=[];forIn(object,function(value,key){pairs.push(key,value)});var length=pairs.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){if(callback(pairs[length--],pairs[length],object)===false){break}}return object}var forOwn=function(collection,callback,thisArg){var index,iterable=collection,result=iterable;if(!iterable)return result;if(!objectTypes[typeof iterable])return result;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(callback(iterable[index],index,collection)===false)return result}return result};function forOwnRight(object,callback,thisArg){var props=keys(object),length=props.length;callback=baseCreateCallback(callback,thisArg,3);while(length--){var key=props[length];if(callback(object[key],key,object)===false){break}}return object}function functions(object){var result=[];forIn(object,function(value,key){if(isFunction(value)){result.push(key)}});return result.sort()}function has(object,key){return object?hasOwnProperty.call(object,key):false}function invert(object){var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index];result[object[key]]=key}return result}function isBoolean(value){return value===true||value===false||value&&typeof value=="object"&&toString.call(value)==boolClass||false}function isDate(value){return value&&typeof value=="object"&&toString.call(value)==dateClass||false}function isElement(value){return value&&value.nodeType===1||false}function isEmpty(value){var result=true;if(!value){return result}var className=toString.call(value),length=value.length;if(className==arrayClass||className==stringClass||className==argsClass||className==objectClass&&typeof length=="number"&&isFunction(value.splice)){return!length}forOwn(value,function(){return result=false});return result}function isEqual(a,b,callback,thisArg){return baseIsEqual(a,b,typeof callback=="function"&&baseCreateCallback(callback,thisArg,2))}function isFinite(value){return nativeIsFinite(value)&&!nativeIsNaN(parseFloat(value))}function isFunction(value){return typeof value=="function"}function isObject(value){return!!(value&&objectTypes[typeof value])}function isNaN(value){return isNumber(value)&&value!=+value}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||value&&typeof value=="object"&&toString.call(value)==numberClass||false}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&toString.call(value)==objectClass)){return false}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return value&&typeof value=="object"&&toString.call(value)==regexpClass||false}function isString(value){return typeof value=="string"||value&&typeof value=="object"&&toString.call(value)==stringClass||false}function isUndefined(value){return typeof value=="undefined"}function mapValues(object,callback,thisArg){var result={};callback=lodash.createCallback(callback,thisArg,3);forOwn(object,function(value,key,object){result[key]=callback(value,key,object)});return result}function merge(object){var args=arguments,length=2;if(!isObject(object)){return object}if(typeof args[2]!="number"){length=args.length}if(length>3&&typeof args[length-2]=="function"){var callback=baseCreateCallback(args[--length-1],args[length--],2)}else if(length>2&&typeof args[length-1]=="function"){callback=args[--length]}var sources=slice(arguments,1,length),index=-1,stackA=getArray(),stackB=getArray();while(++index<length){baseMerge(object,sources[index],callback,stackA,stackB)}releaseArray(stackA);releaseArray(stackB);
return object}function omit(object,callback,thisArg){var result={};if(typeof callback!="function"){var props=[];forIn(object,function(value,key){props.push(key)});props=baseDifference(props,baseFlatten(arguments,true,false,1));var index=-1,length=props.length;while(++index<length){var key=props[index];result[key]=object[key]}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(!callback(value,key,object)){result[key]=value}})}return result}function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}function pick(object,callback,thisArg){var result={};if(typeof callback!="function"){var index=-1,props=baseFlatten(arguments,true,false,1),length=isObject(object)?props.length:0;while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}}else{callback=lodash.createCallback(callback,thisArg,3);forIn(object,function(value,key,object){if(callback(value,key,object)){result[key]=value}})}return result}function transform(object,callback,accumulator,thisArg){var isArr=isArray(object);if(accumulator==null){if(isArr){accumulator=[]}else{var ctor=object&&object.constructor,proto=ctor&&ctor.prototype;accumulator=baseCreate(proto)}}if(callback){callback=lodash.createCallback(callback,thisArg,4);(isArr?forEach:forOwn)(object,function(value,index,object){return callback(accumulator,value,index,object)})}return accumulator}function values(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function at(collection){var args=arguments,index=-1,props=baseFlatten(args,true,false,1),length=args[2]&&args[2][args[1]]===collection?1:props.length,result=Array(length);while(++index<length){result[index]=collection[props[index]]}return result}function contains(collection,target,fromIndex){var index=-1,indexOf=getIndexOf(),length=collection?collection.length:0,result=false;fromIndex=(fromIndex<0?nativeMax(0,length+fromIndex):fromIndex)||0;if(isArray(collection)){result=indexOf(collection,target,fromIndex)>-1}else if(typeof length=="number"){result=(isString(collection)?collection.indexOf(target,fromIndex):indexOf(collection,target,fromIndex))>-1}else{forOwn(collection,function(value){if(++index>=fromIndex){return!(result=value===target)}})}return result}var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?result[key]++:result[key]=1});function every(collection,callback,thisArg){var result=true;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(!(result=!!callback(collection[index],index,collection))){break}}}else{forOwn(collection,function(value,index,collection){return result=!!callback(value,index,collection)})}return result}function filter(collection,callback,thisArg){var result=[];callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){result.push(value)}}}else{forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result.push(value)}})}return result}function find(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){var value=collection[index];if(callback(value,index,collection)){return value}}}else{var result;forOwn(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}}function findLast(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);forEachRight(collection,function(value,index,collection){if(callback(value,index,collection)){result=value;return false}});return result}function forEach(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(++index<length){if(callback(collection[index],index,collection)===false){break}}}else{forOwn(collection,callback)}return collection}function forEachRight(collection,callback,thisArg){var length=collection?collection.length:0;callback=callback&&typeof thisArg=="undefined"?callback:baseCreateCallback(callback,thisArg,3);if(typeof length=="number"){while(length--){if(callback(collection[length],length,collection)===false){break}}}else{var props=keys(collection);length=props.length;forOwn(collection,function(value,key,collection){key=props?props[--length]:--length;return callback(collection[key],key,collection)})}return collection}var groupBy=createAggregator(function(result,value,key){(hasOwnProperty.call(result,key)?result[key]:result[key]=[]).push(value)});var indexBy=createAggregator(function(result,value,key){result[key]=value});function invoke(collection,methodName){var args=slice(arguments,2),index=-1,isFunc=typeof methodName=="function",length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){result[++index]=(isFunc?methodName:value[methodName]).apply(value,args)});return result}function map(collection,callback,thisArg){var index=-1,length=collection?collection.length:0;callback=lodash.createCallback(callback,thisArg,3);if(typeof length=="number"){var result=Array(length);while(++index<length){result[index]=callback(collection[index],index,collection)}}else{result=[];forOwn(collection,function(value,key,collection){result[++index]=callback(value,key,collection)})}return result}function max(collection,callback,thisArg){var computed=-Infinity,result=computed;if(typeof callback!="function"&&thisArg&&thisArg[callback]===collection){callback=null}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value>result){result=value}}}else{callback=callback==null&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current>computed){computed=current;result=value}})}return result}function min(collection,callback,thisArg){var computed=Infinity,result=computed;if(typeof callback!="function"&&thisArg&&thisArg[callback]===collection){callback=null}if(callback==null&&isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];if(value<result){result=value}}}else{callback=callback==null&&isString(collection)?charAtCallback:lodash.createCallback(callback,thisArg,3);forEach(collection,function(value,index,collection){var current=callback(value,index,collection);if(current<computed){computed=current;result=value}})}return result}var pluck=map;function reduce(collection,callback,accumulator,thisArg){if(!collection)return accumulator;var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);var index=-1,length=collection.length;if(typeof length=="number"){if(noaccum){accumulator=collection[++index]}while(++index<length){accumulator=callback(accumulator,collection[index],index,collection)}}else{forOwn(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)})}return accumulator}function reduceRight(collection,callback,accumulator,thisArg){var noaccum=arguments.length<3;callback=lodash.createCallback(callback,thisArg,4);forEachRight(collection,function(value,index,collection){accumulator=noaccum?(noaccum=false,value):callback(accumulator,value,index,collection)});return accumulator}function reject(collection,callback,thisArg){callback=lodash.createCallback(callback,thisArg,3);return filter(collection,function(value,index,collection){return!callback(value,index,collection)})}function sample(collection,n,guard){if(collection&&typeof collection.length!="number"){collection=values(collection)}if(n==null||guard){return collection?collection[baseRandom(0,collection.length-1)]:undefined}var result=shuffle(collection);result.length=nativeMin(nativeMax(0,n),result.length);return result}function shuffle(collection){var index=-1,length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);forEach(collection,function(value){var rand=baseRandom(0,++index);result[index]=result[rand];result[rand]=value});return result}function size(collection){var length=collection?collection.length:0;return typeof length=="number"?length:keys(collection).length}function some(collection,callback,thisArg){var result;callback=lodash.createCallback(callback,thisArg,3);var index=-1,length=collection?collection.length:0;if(typeof length=="number"){while(++index<length){if(result=callback(collection[index],index,collection)){break}}}else{forOwn(collection,function(value,index,collection){return!(result=callback(value,index,collection))})}return!!result}function sortBy(collection,callback,thisArg){var index=-1,isArr=isArray(callback),length=collection?collection.length:0,result=Array(typeof length=="number"?length:0);if(!isArr){callback=lodash.createCallback(callback,thisArg,3)}forEach(collection,function(value,key,collection){var object=result[++index]=getObject();if(isArr){object.criteria=map(callback,function(key){return value[key]})}else{(object.criteria=getArray())[0]=callback(value,key,collection)}object.index=index;object.value=value});length=result.length;result.sort(compareAscending);while(length--){var object=result[length];result[length]=object.value;if(!isArr){releaseArray(object.criteria)}releaseObject(object)}return result}function toArray(collection){if(collection&&typeof collection.length=="number"){return slice(collection)}return values(collection)}var where=filter;function compact(array){var index=-1,length=array?array.length:0,result=[];while(++index<length){var value=array[index];if(value){result.push(value)}}return result}function difference(array){return baseDifference(array,baseFlatten(arguments,true,true,1))}function findIndex(array,callback,thisArg){var index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length){if(callback(array[index],index,array)){return index}}return-1}function findLastIndex(array,callback,thisArg){var length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(length--){if(callback(array[length],length,array)){return length}}return-1}function first(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=-1;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array?array[0]:undefined}}return slice(array,0,nativeMin(nativeMax(0,n),length))}function flatten(array,isShallow,callback,thisArg){if(typeof isShallow!="boolean"&&isShallow!=null){thisArg=callback;callback=typeof isShallow!="function"&&thisArg&&thisArg[isShallow]===array?null:isShallow;isShallow=false}if(callback!=null){array=map(array,callback,thisArg)}return baseFlatten(array,isShallow)}function indexOf(array,value,fromIndex){if(typeof fromIndex=="number"){var length=array?array.length:0;fromIndex=fromIndex<0?nativeMax(0,length+fromIndex):fromIndex||0}else if(fromIndex){var index=sortedIndex(array,value);return array[index]===value?index:-1}return baseIndexOf(array,value,fromIndex)}function initial(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:callback||n}return slice(array,0,nativeMin(nativeMax(0,length-n),length))}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=getArray(),indexOf=getIndexOf(),trustIndexOf=indexOf===baseIndexOf,seen=getArray();while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArray(value)||isArguments(value)){args.push(value);caches.push(trustIndexOf&&value.length>=largeArraySize&&createCache(argsIndex?args[argsIndex]:seen))}}var array=args[0],index=-1,length=array?array.length:0,result=[];outer:while(++index<length){var cache=caches[0];value=array[index];if((cache?cacheIndexOf(cache,value):indexOf(seen,value))<0){argsIndex=argsLength;(cache||seen).push(value);while(--argsIndex){cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value))<0){continue outer}}result.push(value)}}while(argsLength--){cache=caches[argsLength];if(cache){releaseObject(cache)}}releaseArray(caches);releaseArray(seen);return result}function last(array,callback,thisArg){var n=0,length=array?array.length:0;if(typeof callback!="number"&&callback!=null){var index=length;callback=lodash.createCallback(callback,thisArg,3);while(index--&&callback(array[index],index,array)){n++}}else{n=callback;if(n==null||thisArg){return array?array[length-1]:undefined}}return slice(array,nativeMax(0,length-n))}function lastIndexOf(array,value,fromIndex){var index=array?array.length:0;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(0,index+fromIndex):nativeMin(fromIndex,index-1))+1}while(index--){if(array[index]===value){return index}}return-1}function pull(array){var args=arguments,argsIndex=0,argsLength=args.length,length=array?array.length:0;while(++argsIndex<argsLength){var index=-1,value=args[argsIndex];while(++index<length){if(array[index]===value){splice.call(array,index--,1);length--}}}return array}function range(start,end,step){start=+start||0;step=typeof step=="number"?step:+step||1;if(end==null){end=start;start=0}var index=-1,length=nativeMax(0,ceil((end-start)/(step||1))),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function remove(array,callback,thisArg){var index=-1,length=array?array.length:0,result=[];callback=lodash.createCallback(callback,thisArg,3);while(++index<length){var value=array[index];if(callback(value,index,array)){result.push(value);splice.call(array,index--,1);length--}}return result}function rest(array,callback,thisArg){if(typeof callback!="number"&&callback!=null){var n=0,index=-1,length=array?array.length:0;callback=lodash.createCallback(callback,thisArg,3);while(++index<length&&callback(array[index],index,array)){n++}}else{n=callback==null||thisArg?1:nativeMax(0,callback)}return slice(array,n)}function sortedIndex(array,value,callback,thisArg){var low=0,high=array?array.length:low;callback=callback?lodash.createCallback(callback,thisArg,1):identity;value=callback(value);while(low<high){var mid=low+high>>>1;callback(array[mid])<value?low=mid+1:high=mid}return low}function union(){return baseUniq(baseFlatten(arguments,true,true))}function uniq(array,isSorted,callback,thisArg){if(typeof isSorted!="boolean"&&isSorted!=null){thisArg=callback;callback=typeof isSorted!="function"&&thisArg&&thisArg[isSorted]===array?null:isSorted;isSorted=false}if(callback!=null){callback=lodash.createCallback(callback,thisArg,3)}return baseUniq(array,isSorted,callback)}function without(array){return baseDifference(array,slice(arguments,1))}function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArray(array)||isArguments(array)){var result=result?baseUniq(baseDifference(result,array).concat(baseDifference(array,result))):array}}return result||[]}function zip(){var array=arguments.length>1?arguments:arguments[0],index=-1,length=array?max(pluck(array,"length")):0,result=Array(length<0?0:length);while(++index<length){result[index]=pluck(array,index)}return result}function zipObject(keys,values){var index=-1,length=keys?keys.length:0,result={};if(!values&&length&&!isArray(keys[0])){values=[]}while(++index<length){var key=keys[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}function after(n,func){if(!isFunction(func)){throw new TypeError}return function(){if(--n<1){return func.apply(this,arguments)}}}function bind(func,thisArg){return arguments.length>2?createWrapper(func,17,slice(arguments,2),null,thisArg):createWrapper(func,1,null,null,thisArg)}function bindAll(object){var funcs=arguments.length>1?baseFlatten(arguments,true,false,1):functions(object),index=-1,length=funcs.length;while(++index<length){var key=funcs[index];object[key]=createWrapper(object[key],1,null,null,object)}return object}function bindKey(object,key){return arguments.length>2?createWrapper(key,19,slice(arguments,2),null,object):createWrapper(key,3,null,null,object)}function compose(){var funcs=arguments,length=funcs.length;while(length--){if(!isFunction(funcs[length])){throw new TypeError}}return function(){var args=arguments,length=funcs.length;while(length--){args=[funcs[length].apply(this,args)]}return args[0]}}function curry(func,arity){arity=typeof arity=="number"?arity:+arity||func.length;return createWrapper(func,4,null,null,null,arity)}function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(!isFunction(func)){throw new TypeError}wait=nativeMax(0,wait)||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&(nativeMax(wait,options.maxWait)||0);trailing="trailing"in options?options.trailing:trailing}var delayed=function(){var remaining=wait-(now()-stamp);if(remaining<=0){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}};var maxDelayed=function(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}};return function(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}}function defer(func){if(!isFunction(func)){throw new TypeError}var args=slice(arguments,1);return setTimeout(function(){func.apply(undefined,args)},1)}function delay(func,wait){if(!isFunction(func)){throw new TypeError}var args=slice(arguments,2);return setTimeout(function(){func.apply(undefined,args)},wait)}function memoize(func,resolver){if(!isFunction(func)){throw new TypeError}var memoized=function(){var cache=memoized.cache,key=resolver?resolver.apply(this,arguments):keyPrefix+arguments[0];return hasOwnProperty.call(cache,key)?cache[key]:cache[key]=func.apply(this,arguments)};memoized.cache={};return memoized}function once(func){var ran,result;if(!isFunction(func)){throw new TypeError}return function(){if(ran){return result}ran=true;result=func.apply(this,arguments);func=null;return result}}function partial(func){return createWrapper(func,16,slice(arguments,1))}function partialRight(func){return createWrapper(func,32,null,slice(arguments,1))}function throttle(func,wait,options){var leading=true,trailing=true;if(!isFunction(func)){throw new TypeError}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?options.leading:leading;trailing="trailing"in options?options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function wrap(value,wrapper){return createWrapper(wrapper,16,[value])}function constant(value){return function(){return value}}function createCallback(func,thisArg,argCount){var type=typeof func;if(func==null||type=="function"){return baseCreateCallback(func,thisArg,argCount)}if(type!="object"){return property(func)}var props=keys(func),key=props[0],a=func[key];if(props.length==1&&a===a&&!isObject(a)){return function(object){var b=object[key];return a===b&&(a!==0||1/a==1/b)}}return function(object){var length=props.length,result=false;while(length--){if(!(result=baseIsEqual(object[props[length]],func[props[length]],null,true))){break}}return result}}function escape(string){return string==null?"":String(string).replace(reUnescapedHtml,escapeHtmlChar)}function identity(value){return value}function mixin(object,source,options){var chain=true,methodNames=source&&functions(source);if(!source||!options&&!methodNames.length){if(options==null){options=source}ctor=lodashWrapper;source=object;object=lodash;methodNames=functions(source)}if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}var ctor=object,isFunc=isFunction(ctor);forEach(methodNames,function(methodName){var func=object[methodName]=source[methodName];if(isFunc){ctor.prototype[methodName]=function(){var chainAll=this.__chain__,value=this.__wrapped__,args=[value];push.apply(args,arguments);var result=func.apply(object,args);if(chain||chainAll){if(value===result&&isObject(result)){return this}result=new ctor(result);result.__chain__=chainAll}return result}}})}function noConflict(){context._=oldDash;return this}function noop(){}var now=isNative(now=Date.now)&&now||function(){return(new Date).getTime()};var parseInt=nativeParseInt(whitespace+"08")==8?nativeParseInt:function(value,radix){return nativeParseInt(isString(value)?value.replace(reLeadingSpacesAndZeros,""):value,radix||0)};function property(key){return function(object){return object[key]}}function random(min,max,floating){var noMin=min==null,noMax=max==null;if(floating==null){if(typeof min=="boolean"&&noMax){floating=min;min=1}else if(!noMax&&typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}function result(object,key){if(object){var value=object[key];return isFunction(value)?object[key]():value}}function template(text,data,options){var settings=lodash.templateSettings;text=String(text||"");options=defaults({},options,settings);var imports=defaults({},options.imports,settings.imports),importsKeys=keys(imports),importsValues=values(imports);var isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");text.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=text.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable,hasVariable=variable;if(!hasVariable){variable="obj";source="with ("+variable+") {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+variable+") {\n"+(hasVariable?"":variable+" || ("+variable+" = {});\n")+"var __t, __p = '', __e = _.escape"+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var sourceURL="\n/*\n//# sourceURL="+(options.sourceURL||"/lodash/template/source["+templateCounter++ +"]")+"\n*/";try{var result=Function(importsKeys,"return "+source+sourceURL).apply(undefined,importsValues)}catch(e){e.source=source;throw e}if(data){return result(data)}result.source=source;return result}function times(n,callback,thisArg){n=(n=+n)>-1?n:0;var index=-1,result=Array(n);callback=baseCreateCallback(callback,thisArg,1);while(++index<n){result[index]=callback(index)}return result}function unescape(string){return string==null?"":String(string).replace(reEscapedHtml,unescapeHtmlChar)}function uniqueId(prefix){var id=++idCounter;return String(prefix==null?"":prefix)+id}function chain(value){value=new lodashWrapper(value);value.__chain__=true;return value}function tap(value,interceptor){interceptor(value);return value}function wrapperChain(){this.__chain__=true;return this}function wrapperToString(){return String(this.__wrapped__)}function wrapperValueOf(){return this.__wrapped__}lodash.after=after;lodash.assign=assign;lodash.at=at;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.chain=chain;lodash.compact=compact;lodash.compose=compose;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.createCallback=createCallback;lodash.curry=curry;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.filter=filter;lodash.flatten=flatten;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.map=map;lodash.mapValues=mapValues;lodash.max=max;lodash.memoize=memoize;lodash.merge=merge;lodash.min=min;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.pull=pull;lodash.range=range;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.shuffle=shuffle;lodash.sortBy=sortBy;lodash.tap=tap;lodash.throttle=throttle;lodash.times=times;lodash.toArray=toArray;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.values=values;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.collect=map;lodash.drop=rest;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;lodash.unzip=zip;mixin(lodash);lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.contains=contains;lodash.escape=escape;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.has=has;lodash.identity=identity;lodash.indexOf=indexOf;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isNaN=isNaN;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isUndefined=isUndefined;lodash.lastIndexOf=lastIndexOf;lodash.mixin=mixin;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.template=template;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.all=every;lodash.any=some;lodash.detect=find;lodash.findWhere=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.include=contains;lodash.inject=reduce;mixin(function(){var source={};forOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.first=first;lodash.last=last;lodash.sample=sample;lodash.take=first;lodash.head=first;forOwn(lodash,function(func,methodName){var callbackable=methodName!=="sample";if(!lodash.prototype[methodName]){lodash.prototype[methodName]=function(n,guard){var chainAll=this.__chain__,result=func(this.__wrapped__,n,guard);return!chainAll&&(n==null||guard&&!(callbackable&&typeof n=="function"))?result:new lodashWrapper(result,chainAll)}}});lodash.VERSION="2.4.1";lodash.prototype.chain=wrapperChain;lodash.prototype.toString=wrapperToString;lodash.prototype.value=wrapperValueOf;lodash.prototype.valueOf=wrapperValueOf;forEach(["join","pop","shift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){var chainAll=this.__chain__,result=func.apply(this.__wrapped__,arguments);return chainAll?new lodashWrapper(result,chainAll):result}});forEach(["push","reverse","sort","unshift"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){func.apply(this.__wrapped__,arguments);return this}});forEach(["concat","slice","splice"],function(methodName){var func=arrayRef[methodName];lodash.prototype[methodName]=function(){return new lodashWrapper(func.apply(this.__wrapped__,arguments),this.__chain__)}});return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)},{}],25:[function(require,module,exports){!function(root,String){"use strict";var nativeTrim=String.prototype.trim;var nativeTrimRight=String.prototype.trimRight;var nativeTrimLeft=String.prototype.trimLeft;var parseNumber=function(source){return source*1||0};var strRepeat=function(str,qty){if(qty<1)return"";var result="";while(qty>0){if(qty&1)result+=str;qty>>=1,str+=str}return result};var slice=[].slice;var defaultToWhiteSpace=function(characters){if(characters==null)return"\\s";else if(characters.source)return characters.source;else return"["+_s.escapeRegExp(characters)+"]"};function boolMatch(s,matchers){var i,matcher,down=s.toLowerCase();matchers=[].concat(matchers);for(i=0;i<matchers.length;i+=1){matcher=matchers[i];if(!matcher)continue;if(matcher.test&&matcher.test(s))return true;if(matcher.toLowerCase()===down)return true}}var escapeChars={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var reversedEscapeChars={};for(var key in escapeChars)reversedEscapeChars[escapeChars[key]]=key;reversedEscapeChars["'"]="#39";var sprintf=function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}var str_repeat=strRepeat;var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type="",arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==="string"){output.push(parse_tree[i])}else if(node_type==="array"){match=parse_tree[i];
if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw new Error(sprintf('[_.sprintf] property "%s" does not exist',match[2][k]))}arg=arg[match[2][k]]}}else if(match[1]){arg=argv[match[1]]}else{arg=argv[cursor++]}if(/[^s]/.test(match[8])&&get_type(arg)!="number"){throw new Error(sprintf("[_.sprintf] expecting number but found %s",get_type(arg)))}switch(match[8]){case"b":arg=arg.toString(2);break;case"c":arg=String.fromCharCode(arg);break;case"d":arg=parseInt(arg,10);break;case"e":arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case"f":arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case"o":arg=arg.toString(8);break;case"s":arg=(arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg;break;case"u":arg=Math.abs(arg);break;case"x":arg=arg.toString(16);break;case"X":arg=arg.toString(16).toUpperCase();break}arg=/[def]/.test(match[8])&&match[3]&&arg>=0?"+"+arg:arg;pad_character=match[4]?match[4]=="0"?"0":match[4].charAt(1):" ";pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):"";output.push(match[5]?arg+pad:pad+arg)}}return output.join("")};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push("%")}else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==""){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}else{throw new Error("[_.sprintf] huh?")}}}else{throw new Error("[_.sprintf] huh?")}match[2]=field_list}else{arg_names|=2}if(arg_names===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}parse_tree.push(match)}else{throw new Error("[_.sprintf] huh?")}_fmt=_fmt.substring(match[0].length)}return parse_tree};return str_format}();var _s={VERSION:"2.3.0",isBlank:function(str){if(str==null)str="";return/^\s*$/.test(str)},stripTags:function(str){if(str==null)return"";return String(str).replace(/<\/?[^>]+>/g,"")},capitalize:function(str){str=str==null?"":String(str);return str.charAt(0).toUpperCase()+str.slice(1)},chop:function(str,step){if(str==null)return[];str=String(str);step=~~step;return step>0?str.match(new RegExp(".{1,"+step+"}","g")):[str]},clean:function(str){return _s.strip(str).replace(/\s+/g," ")},count:function(str,substr){if(str==null||substr==null)return 0;str=String(str);substr=String(substr);var count=0,pos=0,length=substr.length;while(true){pos=str.indexOf(substr,pos);if(pos===-1)break;count++;pos+=length}return count},chars:function(str){if(str==null)return[];return String(str).split("")},swapCase:function(str){if(str==null)return"";return String(str).replace(/\S/g,function(c){return c===c.toUpperCase()?c.toLowerCase():c.toUpperCase()})},escapeHTML:function(str){if(str==null)return"";return String(str).replace(/[&<>"']/g,function(m){return"&"+reversedEscapeChars[m]+";"})},unescapeHTML:function(str){if(str==null)return"";return String(str).replace(/\&([^;]+);/g,function(entity,entityCode){var match;if(entityCode in escapeChars){return escapeChars[entityCode]}else if(match=entityCode.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(match[1],16))}else if(match=entityCode.match(/^#(\d+)$/)){return String.fromCharCode(~~match[1])}else{return entity}})},escapeRegExp:function(str){if(str==null)return"";return String(str).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(str,i,howmany,substr){var arr=_s.chars(str);arr.splice(~~i,~~howmany,substr);return arr.join("")},insert:function(str,i,substr){return _s.splice(str,i,0,substr)},include:function(str,needle){if(needle==="")return true;if(str==null)return false;return String(str).indexOf(needle)!==-1},join:function(){var args=slice.call(arguments),separator=args.shift();if(separator==null)separator="";return args.join(separator)},lines:function(str){if(str==null)return[];return String(str).split("\n")},reverse:function(str){return _s.chars(str).reverse().join("")},startsWith:function(str,starts){if(starts==="")return true;if(str==null||starts==null)return false;str=String(str);starts=String(starts);return str.length>=starts.length&&str.slice(0,starts.length)===starts},endsWith:function(str,ends){if(ends==="")return true;if(str==null||ends==null)return false;str=String(str);ends=String(ends);return str.length>=ends.length&&str.slice(str.length-ends.length)===ends},succ:function(str){if(str==null)return"";str=String(str);return str.slice(0,-1)+String.fromCharCode(str.charCodeAt(str.length-1)+1)},titleize:function(str){if(str==null)return"";str=String(str).toLowerCase();return str.replace(/(?:^|\s|-)\S/g,function(c){return c.toUpperCase()})},camelize:function(str){return _s.trim(str).replace(/[-_\s]+(.)?/g,function(match,c){return c?c.toUpperCase():""})},underscored:function(str){return _s.trim(str).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(str){return _s.trim(str).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(str){return _s.titleize(String(str).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(str){return _s.capitalize(_s.underscored(str).replace(/_id$/,"").replace(/_/g," "))},trim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrim)return nativeTrim.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp("^"+characters+"+|"+characters+"+$","g"),"")},ltrim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrimLeft)return nativeTrimLeft.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp("^"+characters+"+"),"")},rtrim:function(str,characters){if(str==null)return"";if(!characters&&nativeTrimRight)return nativeTrimRight.call(str);characters=defaultToWhiteSpace(characters);return String(str).replace(new RegExp(characters+"+$"),"")},truncate:function(str,length,truncateStr){if(str==null)return"";str=String(str);truncateStr=truncateStr||"...";length=~~length;return str.length>length?str.slice(0,length)+truncateStr:str},prune:function(str,length,pruneStr){if(str==null)return"";str=String(str);length=~~length;pruneStr=pruneStr!=null?String(pruneStr):"...";if(str.length<=length)return str;var tmpl=function(c){return c.toUpperCase()!==c.toLowerCase()?"A":" "},template=str.slice(0,length+1).replace(/.(?=\W*\w*$)/g,tmpl);if(template.slice(template.length-2).match(/\w\w/))template=template.replace(/\s*\S+$/,"");else template=_s.rtrim(template.slice(0,template.length-1));return(template+pruneStr).length>str.length?str:str.slice(0,template.length)+pruneStr},words:function(str,delimiter){if(_s.isBlank(str))return[];return _s.trim(str,delimiter).split(delimiter||/\s+/)},pad:function(str,length,padStr,type){str=str==null?"":String(str);length=~~length;var padlen=0;if(!padStr)padStr=" ";else if(padStr.length>1)padStr=padStr.charAt(0);switch(type){case"right":padlen=length-str.length;return str+strRepeat(padStr,padlen);case"both":padlen=length-str.length;return strRepeat(padStr,Math.ceil(padlen/2))+str+strRepeat(padStr,Math.floor(padlen/2));default:padlen=length-str.length;return strRepeat(padStr,padlen)+str}},lpad:function(str,length,padStr){return _s.pad(str,length,padStr)},rpad:function(str,length,padStr){return _s.pad(str,length,padStr,"right")},lrpad:function(str,length,padStr){return _s.pad(str,length,padStr,"both")},sprintf:sprintf,vsprintf:function(fmt,argv){argv.unshift(fmt);return sprintf.apply(null,argv)},toNumber:function(str,decimals){if(!str)return 0;str=_s.trim(str);if(!str.match(/^-?\d+(?:\.\d+)?$/))return NaN;return parseNumber(parseNumber(str).toFixed(~~decimals))},numberFormat:function(number,dec,dsep,tsep){if(isNaN(number)||number==null)return"";number=number.toFixed(~~dec);tsep=typeof tsep=="string"?tsep:",";var parts=number.split("."),fnums=parts[0],decimals=parts[1]?(dsep||".")+parts[1]:"";return fnums.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+tsep)+decimals},strRight:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.indexOf(sep);return~pos?str.slice(pos+sep.length,str.length):str},strRightBack:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.lastIndexOf(sep);return~pos?str.slice(pos+sep.length,str.length):str},strLeft:function(str,sep){if(str==null)return"";str=String(str);sep=sep!=null?String(sep):sep;var pos=!sep?-1:str.indexOf(sep);return~pos?str.slice(0,pos):str},strLeftBack:function(str,sep){if(str==null)return"";str+="";sep=sep!=null?""+sep:sep;var pos=str.lastIndexOf(sep);return~pos?str.slice(0,pos):str},toSentence:function(array,separator,lastSeparator,serial){separator=separator||", ";lastSeparator=lastSeparator||" and ";var a=array.slice(),lastMember=a.pop();if(array.length>2&&serial)lastSeparator=_s.rtrim(separator)+lastSeparator;return a.length?a.join(separator)+lastSeparator+lastMember:lastMember},toSentenceSerial:function(){var args=slice.call(arguments);args[3]=true;return _s.toSentence.apply(_s,args)},slugify:function(str){if(str==null)return"";var from="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",to="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",regex=new RegExp(defaultToWhiteSpace(from),"g");str=String(str).toLowerCase().replace(regex,function(c){var index=from.indexOf(c);return to.charAt(index)||"-"});return _s.dasherize(str.replace(/[^\w\s-]/g,""))},surround:function(str,wrapper){return[wrapper,str,wrapper].join("")},quote:function(str,quoteChar){return _s.surround(str,quoteChar||'"')},unquote:function(str,quoteChar){quoteChar=quoteChar||'"';if(str[0]===quoteChar&&str[str.length-1]===quoteChar)return str.slice(1,str.length-1);else return str},exports:function(){var result={};for(var prop in this){if(!this.hasOwnProperty(prop)||prop.match(/^(?:include|contains|reverse)$/))continue;result[prop]=this[prop]}return result},repeat:function(str,qty,separator){if(str==null)return"";qty=~~qty;if(separator==null)return strRepeat(String(str),qty);for(var repeat=[];qty>0;repeat[--qty]=str){}return repeat.join(separator)},naturalCmp:function(str1,str2){if(str1==str2)return 0;if(!str1)return-1;if(!str2)return 1;var cmpRegex=/(\.\d+)|(\d+)|(\D+)/g,tokens1=String(str1).toLowerCase().match(cmpRegex),tokens2=String(str2).toLowerCase().match(cmpRegex),count=Math.min(tokens1.length,tokens2.length);for(var i=0;i<count;i++){var a=tokens1[i],b=tokens2[i];if(a!==b){var num1=parseInt(a,10);if(!isNaN(num1)){var num2=parseInt(b,10);if(!isNaN(num2)&&num1-num2)return num1-num2}return a<b?-1:1}}if(tokens1.length===tokens2.length)return tokens1.length-tokens2.length;return str1<str2?-1:1},levenshtein:function(str1,str2){if(str1==null&&str2==null)return 0;if(str1==null)return String(str2).length;if(str2==null)return String(str1).length;str1=String(str1);str2=String(str2);var current=[],prev,value;for(var i=0;i<=str2.length;i++)for(var j=0;j<=str1.length;j++){if(i&&j)if(str1.charAt(j-1)===str2.charAt(i-1))value=prev;else value=Math.min(current[j],current[j-1],prev)+1;else value=i+j;prev=current[j];current[j]=value}return current.pop()},toBoolean:function(str,trueValues,falseValues){if(typeof str==="number")str=""+str;if(typeof str!=="string")return!!str;str=_s.trim(str);if(boolMatch(str,trueValues||["true","1"]))return true;if(boolMatch(str,falseValues||["false","0"]))return false}};_s.strip=_s.trim;_s.lstrip=_s.ltrim;_s.rstrip=_s.rtrim;_s.center=_s.lrpad;_s.rjust=_s.lpad;_s.ljust=_s.rpad;_s.contains=_s.include;_s.q=_s.quote;_s.toBool=_s.toBoolean;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports)module.exports=_s;exports._s=_s}if(typeof define==="function"&&define.amd)define("underscore.string",[],function(){return _s});root._=root._||{};root._.string=root._.str=_s}(this,String)},{}]},{},[16]);
//# sourceMappingURL=build/framer.min.js.map